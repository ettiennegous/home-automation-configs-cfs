[
    {
        "id": "ea8953c8.9d979",
        "type": "tab",
        "label": "Presence detections",
        "disabled": false,
        "info": ""
    },
    {
        "id": "27f4a783.3a8dc8",
        "type": "tab",
        "label": "Auto Lights DS",
        "disabled": false,
        "info": ""
    },
    {
        "id": "a76c0410.5bd8c8",
        "type": "tab",
        "label": "Auto Lights US",
        "disabled": false,
        "info": ""
    },
    {
        "id": "d1ff6abb.b25cf8",
        "type": "tab",
        "label": "Auto Off Timers US",
        "disabled": false,
        "info": ""
    },
    {
        "id": "191e949e.9f212b",
        "type": "tab",
        "label": "Auto Off Timers DS",
        "disabled": false,
        "info": ""
    },
    {
        "id": "e594dd4a.60761",
        "type": "tab",
        "label": "Remotes",
        "disabled": false,
        "info": ""
    },
    {
        "id": "9a1b490a16d77e03",
        "type": "tab",
        "label": "MQTT",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "3434d199.8ed28e",
        "type": "tab",
        "label": "Zigbee Remotes",
        "disabled": false,
        "info": ""
    },
    {
        "id": "823d3fb7.65d29",
        "type": "tab",
        "label": "Routines",
        "disabled": false,
        "info": ""
    },
    {
        "id": "ff5661ef.cd5bf",
        "type": "tab",
        "label": "Alarm",
        "disabled": false,
        "info": ""
    },
    {
        "id": "6e7a064f.40b368",
        "type": "tab",
        "label": "Cameras",
        "disabled": false,
        "info": ""
    },
    {
        "id": "e3459f93.04f31",
        "type": "tab",
        "label": "Parking Lot",
        "disabled": false,
        "info": ""
    },
    {
        "id": "59f065f5cc116569",
        "type": "tab",
        "label": "HVAC",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "5a39eab2.9f6814",
        "type": "server",
        "name": "Home Assistant",
        "addon": false,
        "rejectUnauthorizedCerts": true,
        "ha_boolean": "y|yes|true|on|home|open",
        "connectionDelay": true,
        "cacheJson": false,
        "heartbeat": false,
        "heartbeatInterval": "",
        "statusSeparator": "",
        "enableGlobalContextStore": false
    },
    {
        "id": "32add66e.5cfcaa",
        "type": "mqtt-broker",
        "name": "",
        "broker": "192.168.1.40",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "baaf931a.ba3de",
        "type": "server-state-changed",
        "z": "ea8953c8.9d979",
        "name": "Ettienne home",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "person.ettienne_2",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "home",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 110,
        "y": 80,
        "wires": [
            [
                "4f3eb1ca.3726a"
            ],
            [
                "bb96cff1.d82a5"
            ]
        ]
    },
    {
        "id": "4f3eb1ca.3726a",
        "type": "api-call-service",
        "z": "ea8953c8.9d979",
        "name": "Ettienne Home",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.ettienne_home"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 440,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "bb96cff1.d82a5",
        "type": "api-call-service",
        "z": "ea8953c8.9d979",
        "name": "Ettienne Away",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.ettienne_home"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 440,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "92f55ef6.8a92f",
        "type": "server-state-changed",
        "z": "ea8953c8.9d979",
        "name": "Kelly home",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "person.kelly",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "home",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 180,
        "wires": [
            [
                "6fa0a667.d562c8"
            ],
            [
                "bcd0268f.0fc1c8"
            ]
        ]
    },
    {
        "id": "6fa0a667.d562c8",
        "type": "api-call-service",
        "z": "ea8953c8.9d979",
        "name": "Kelly Home",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.kelly_home"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 430,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "bcd0268f.0fc1c8",
        "type": "api-call-service",
        "z": "ea8953c8.9d979",
        "name": "Kelly Away",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.kelly_home"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 430,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "83878fb4.30705",
        "type": "server-state-changed",
        "z": "ea8953c8.9d979",
        "name": "Ettienne Home Person",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "person.ettienne_2",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "home",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 140,
        "y": 400,
        "wires": [
            [
                "304decee.e9de34"
            ],
            [
                "e94f744f.4dda88"
            ]
        ]
    },
    {
        "id": "870bbf61.c8505",
        "type": "server-state-changed",
        "z": "ea8953c8.9d979",
        "name": "Kelly Home Person",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "person.kelly",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "home",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 130,
        "y": 540,
        "wires": [
            [
                "304decee.e9de34"
            ],
            [
                "3e47820d.382fce"
            ]
        ]
    },
    {
        "id": "e94f744f.4dda88",
        "type": "api-current-state",
        "z": "ea8953c8.9d979",
        "name": "Kelly Home Person",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "person.kelly",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 570,
        "y": 400,
        "wires": [
            [],
            [
                "7c3069d6.6ff938"
            ]
        ]
    },
    {
        "id": "3e47820d.382fce",
        "type": "api-current-state",
        "z": "ea8953c8.9d979",
        "name": "Ettienne Home Person",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "person.ettienne_2",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 580,
        "y": 540,
        "wires": [
            [],
            [
                "7c3069d6.6ff938"
            ]
        ]
    },
    {
        "id": "7c3069d6.6ff938",
        "type": "api-current-state",
        "z": "ea8953c8.9d979",
        "name": "House Guests",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.house_guests",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 840,
        "y": 480,
        "wires": [
            [],
            [
                "cc1ec8c7.424ea8"
            ]
        ]
    },
    {
        "id": "304decee.e9de34",
        "type": "api-call-service",
        "z": "ea8953c8.9d979",
        "name": "Home Occupied",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.home_occupied"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 560,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "cc1ec8c7.424ea8",
        "type": "api-call-service",
        "z": "ea8953c8.9d979",
        "name": "Home Not Occupied",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.home_occupied"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1100,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "d2ed4570.940a98",
        "type": "server-state-changed",
        "z": "ea8953c8.9d979",
        "name": "House Guest Toggle",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.house_guests",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 130,
        "y": 620,
        "wires": [
            [
                "304decee.e9de34"
            ],
            [
                "ef9c8b8f.bfbb18"
            ]
        ]
    },
    {
        "id": "ef9c8b8f.bfbb18",
        "type": "api-current-state",
        "z": "ea8953c8.9d979",
        "name": "Ettienne Home Person",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "person.ettienne_2",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 580,
        "y": 620,
        "wires": [
            [],
            [
                "cb2b1f4e.fd3bb"
            ]
        ]
    },
    {
        "id": "cb2b1f4e.fd3bb",
        "type": "api-current-state",
        "z": "ea8953c8.9d979",
        "name": "Kelly Home Person",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "person.kelly",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 830,
        "y": 620,
        "wires": [
            [],
            [
                "cc1ec8c7.424ea8"
            ]
        ]
    },
    {
        "id": "f1ec2025faf3ad18",
        "type": "server-state-changed",
        "z": "ea8953c8.9d979",
        "name": "Home Un-Occupied for 5 min",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.home_occupied",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 740,
        "wires": [
            [
                "d46d63f791fdef92"
            ],
            []
        ]
    },
    {
        "id": "d46d63f791fdef92",
        "type": "mqtt out",
        "z": "ea8953c8.9d979",
        "name": "Pub MQTT Leave Home",
        "topic": "nodered-custom/routines/leave-home",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "32add66e.5cfcaa",
        "x": 490,
        "y": 740,
        "wires": []
    },
    {
        "id": "d6ad6114.eb34d",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Pantry Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.door_window_sensor_pantry_open",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 2100,
        "wires": [
            [
                "ab73236a82b08730"
            ],
            [
                "4d878b731f7538f9"
            ]
        ]
    },
    {
        "id": "1f2d5974.8e5757",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Pantry Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_pantry"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 780,
        "y": 2120,
        "wires": [
            []
        ]
    },
    {
        "id": "bce86ceb.13782",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Pantry Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_pantry"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 780,
        "y": 2180,
        "wires": [
            []
        ]
    },
    {
        "id": "968e92c3.24fe3",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.door_window_sensor_garage_open",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 150,
        "y": 740,
        "wires": [
            [
                "c136fd73.7bfcb",
                "9c92a3d7.8e664"
            ],
            []
        ]
    },
    {
        "id": "c136fd73.7bfcb",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_garage"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 770,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "cce65336.ef488",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_garage"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1780,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "4fade16e.dc7e5",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Panel Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.door_window_sensor_garagepaneldoor_open",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 840,
        "wires": [
            [
                "c136fd73.7bfcb",
                "9c92a3d7.8e664"
            ],
            [
                "a521d80f.f0a7a8"
            ]
        ]
    },
    {
        "id": "a00c283f.0f9d78",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Stairs Closet Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.door_window_sensor_stairs_closet_open",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 220,
        "wires": [
            [
                "34c203d3.d5c28c"
            ],
            [
                "7d4b071f.6e5798"
            ]
        ]
    },
    {
        "id": "7d4b071f.6e5798",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Cupboard Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_stairs_closet"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 770,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "34c203d3.d5c28c",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Cupboard Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_stairs_closet"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 770,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "5a24c417.69153c",
        "type": "function",
        "z": "27f4a783.3a8dc8",
        "name": "Delay for 60 seconds",
        "func": "setTimeout(function(){\n    node.status({fill:\"red\", shape:\"ring\", text:\" \"});\n    msg['payload'] = 'finished';\n    node.send(msg);\n}, 60000);\nnode.status({fill:\"blue\", shape:\"ring\", text:' '});",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1060,
        "y": 820,
        "wires": [
            [
                "3076db1c.367fb4"
            ]
        ]
    },
    {
        "id": "a521d80f.f0a7a8",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Door Closed",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.door_window_sensor_garage_open",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 780,
        "y": 848,
        "wires": [
            [
                "5a24c417.69153c"
            ],
            []
        ]
    },
    {
        "id": "a65b05ba.dfa598",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Panel Door Closed",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.door_window_sensor_garagepaneldoor_open",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 800,
        "y": 780,
        "wires": [
            [
                "5a24c417.69153c"
            ],
            []
        ]
    },
    {
        "id": "3076db1c.367fb4",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Panel Door Closed",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.door_window_sensor_garagepaneldoor_open",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1320,
        "y": 820,
        "wires": [
            [
                "d4367342.3e3"
            ],
            []
        ]
    },
    {
        "id": "d4367342.3e3",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Door Closed",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.door_window_sensor_garage_open",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1560,
        "y": 820,
        "wires": [
            [
                "cce65336.ef488",
                "147243e2.6588ec"
            ],
            []
        ]
    },
    {
        "id": "436b37d3.8df3a8",
        "type": "comment",
        "z": "27f4a783.3a8dc8",
        "name": "Need to check again after the 60 seconds",
        "info": "Someone may have closed themselves in the garage \nthen opened a door when the countdown has started.",
        "x": 1460,
        "y": 780,
        "wires": []
    },
    {
        "id": "a3957e3c.be42c",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Sun Below Horizon",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "below_horizon",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sun.sun",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1270,
        "y": 1080,
        "wires": [
            [
                "dcb53b6d.23dc48",
                "609765f4.28c1fc"
            ],
            []
        ]
    },
    {
        "id": "d172fbb1.f27a68",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Stairs Landing Tradfri Motion",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.tradfri_pir_2",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 1030,
        "wires": [
            [
                "8d145814.0a7528",
                "d3d1a423.e17d28",
                "3df7c826.175758"
            ],
            []
        ]
    },
    {
        "id": "4e7c2b77.4112d4",
        "type": "function",
        "z": "27f4a783.3a8dc8",
        "name": "Between 9pm and 7am",
        "func": "var d = new Date();\nvar hour = d.getHours();\nif(!msg.data) \n    msg.data = {};\n\nif(hour >= 21 || hour <= 7) {\n    msg.brightness = 30;\n}\nelse {\n    msg.brightness = 100;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1030,
        "y": 1080,
        "wires": [
            [
                "a3957e3c.be42c"
            ]
        ]
    },
    {
        "id": "dcb53b6d.23dc48",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Stairs Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_stairs_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1500,
        "y": 1060,
        "wires": [
            []
        ]
    },
    {
        "id": "609765f4.28c1fc",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Foyer Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.dimmer_foyer_light_level"
        ],
        "data": "{\"brightness_pct\":\"{{brightness}}\"}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1500,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "9c92a3d7.8e664",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Flood Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_3"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 780,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "147243e2.6588ec",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Garage Flood Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_3"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1800,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "8fa5fd26.d785",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Kitchen Light is Turned On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "light.shelly_1_kitchen_light",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 150,
        "y": 320,
        "wires": [
            [
                "70554dd5.f44484"
            ],
            [
                "f59a7c8b.56424"
            ]
        ]
    },
    {
        "id": "70554dd5.f44484",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Alex Kitchen Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_alex_kitchen_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 780,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "f59a7c8b.56424",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Alex Kitchen Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_alex_kitchen_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 780,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "8d145814.0a7528",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Is Dark",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.is_dark",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 740,
        "y": 1080,
        "wires": [
            [
                "4e7c2b77.4112d4"
            ],
            []
        ]
    },
    {
        "id": "fcd251cc.9ec8f",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Asakuki Diffuser On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.diffuser_fan"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1210,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "3df7c826.175758",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Asakuki Is Off",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "switch.diffuser_fan",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 980,
        "y": 960,
        "wires": [
            [
                "fcd251cc.9ec8f"
            ],
            []
        ]
    },
    {
        "id": "246c2d33.fcdda2",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Asakuki Has Water",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.aromatherapy_water",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 630,
        "y": 940,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "d3d1a423.e17d28",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Powder Room Basin Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_powder_room_basin_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 810,
        "y": 1020,
        "wires": [
            [
                "169d704e.b0793"
            ]
        ]
    },
    {
        "id": "8628cbaa.6e0518",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Is Dark",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.is_dark",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1140,
        "y": 2560,
        "wires": [
            [
                "9740729.349569"
            ],
            []
        ]
    },
    {
        "id": "60c3600d.1f3f",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Living Lights On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_4"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1900,
        "y": 2540,
        "wires": [
            []
        ]
    },
    {
        "id": "e1882e38.240ee",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Front Door Open",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.gs_wds_07_door_sensor_01_4",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 280,
        "y": 1760,
        "wires": [
            [
                "d203c87419a1f49c"
            ],
            []
        ]
    },
    {
        "id": "e94e560a.804908",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Is Dark",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.is_dark",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1020,
        "y": 1700,
        "wires": [
            [
                "495feb57371c5510"
            ],
            []
        ]
    },
    {
        "id": "c314f95a.10d298",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Front Door Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.front_door_light_3"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 800,
        "y": 1800,
        "wires": [
            []
        ]
    },
    {
        "id": "169d704e.b0793",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Xmas Tree On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.xmas_tree"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1060,
        "y": 1020,
        "wires": [
            [
                "62e04525.92d89c"
            ]
        ]
    },
    {
        "id": "8209399b.724c48",
        "type": "wled2",
        "z": "27f4a783.3a8dc8",
        "address": "192.168.20.84",
        "brightness": "255",
        "delay": 0,
        "color1": "#ffffff",
        "color2": "#ffffff",
        "color3": "#ffffff",
        "effect": "44",
        "effectIntensity": 128,
        "effectSpeed": 128,
        "name": "Active Tree!",
        "palette": "1",
        "preset": 0,
        "state": "on",
        "x": 1550,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "62e04525.92d89c",
        "type": "function",
        "z": "27f4a783.3a8dc8",
        "name": "Xmas Tree Random Effect",
        "func": "let randomNumber = Math.floor(Math.random() * 111);\nmsg.payload = {\n    \"effect\": randomNumber\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1320,
        "y": 1020,
        "wires": [
            [
                "8209399b.724c48"
            ]
        ]
    },
    {
        "id": "9d322a0d.ba1388",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Pantry PIR",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.sonoff_pir_2",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 2040,
        "wires": [
            [
                "230687b46451439c"
            ],
            []
        ]
    },
    {
        "id": "dd13f82c.0d7b88",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Garden Lights On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.garden_lights"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1590,
        "y": 2580,
        "wires": [
            []
        ]
    },
    {
        "id": "931d08c1.28dcf8",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Kitchen TV Screen On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.samsung_the_frame_32"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1180,
        "y": 2500,
        "wires": [
            []
        ]
    },
    {
        "id": "f8ee8ebc.20b36",
        "type": "wled2",
        "z": "27f4a783.3a8dc8",
        "address": "192.168.20.80",
        "brightness": "255",
        "delay": "20",
        "color1": "#ffffff",
        "color2": "#ffffff",
        "color3": "#ffffff",
        "effect": "77",
        "effectIntensity": 128,
        "effectSpeed": 128,
        "name": "192.168.20.80 LED Strip On",
        "palette": "2",
        "preset": 0,
        "state": "on",
        "x": 1200,
        "y": 2440,
        "wires": [
            []
        ]
    },
    {
        "id": "9740729.349569",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Is Sun Below Horizon",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "below_horizon",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sun.sun",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1340,
        "y": 2560,
        "wires": [
            [
                "dd13f82c.0d7b88",
                "869aec2d2b3a5ac1"
            ],
            []
        ]
    },
    {
        "id": "ab73236a82b08730",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Start Pantry Light Timer",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "timer",
        "service": "start",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.pantry_light_timer"
        ],
        "data": "{\"duration\":\"00:10:00\"}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 810,
        "y": 2020,
        "wires": [
            []
        ]
    },
    {
        "id": "5fcb3dced3effa66",
        "type": "server-events",
        "z": "27f4a783.3a8dc8",
        "name": "Pantry Timer",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "exposeAsEntityConfig": "",
        "eventType": "state_changed",
        "eventData": "{\"entity_id\":\"timer.pantry_light_timer\"}",
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            },
            {
                "property": "event_type",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            }
        ],
        "x": 130,
        "y": 2160,
        "wires": [
            [
                "b3a7dc46346adc51"
            ]
        ]
    },
    {
        "id": "4d878b731f7538f9",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Finish Pantry Light Timer",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "timer",
        "service": "finish",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.pantry_light_timer"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 810,
        "y": 2080,
        "wires": [
            []
        ]
    },
    {
        "id": "de96113e1146b05a",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Pantry Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "light.lifx_pantry",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 140,
        "y": 2000,
        "wires": [
            [
                "230687b46451439c"
            ],
            [
                "4d878b731f7538f9"
            ]
        ]
    },
    {
        "id": "230687b46451439c",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Pantry Timer NOT Paused",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "paused",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "timer.pantry_light_timer",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 460,
        "y": 2000,
        "wires": [
            [
                "ab73236a82b08730"
            ],
            []
        ]
    },
    {
        "id": "21b320a6f37d8e53",
        "type": "comment",
        "z": "27f4a783.3a8dc8",
        "name": "Pantry Light Automation",
        "info": "# Pantry Light Automation",
        "x": 460,
        "y": 1920,
        "wires": []
    },
    {
        "id": "75f28deffcdcce91",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Living Lights Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_4"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1440,
        "y": 2640,
        "wires": [
            []
        ]
    },
    {
        "id": "fcbefd667e37b814",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Tradfri Dining Motion PIR",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.tradfri_pir_1",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 2440,
        "wires": [
            [
                "53cd8e2f5eb0b187"
            ],
            []
        ]
    },
    {
        "id": "1e95e04c1030b69c",
        "type": "wled2",
        "z": "27f4a783.3a8dc8",
        "address": "192.168.20.80",
        "brightness": "255",
        "delay": 0,
        "color1": "#ffffff",
        "color2": "#ffffff",
        "color3": "#ffffff",
        "effect": "44",
        "effectIntensity": 128,
        "effectSpeed": 128,
        "name": "LED Strip Off",
        "palette": "1",
        "preset": 0,
        "state": "off",
        "x": 1150,
        "y": 2720,
        "wires": [
            []
        ]
    },
    {
        "id": "084ac3dba0f0e4b5",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Garden Lights Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.garden_lights"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1170,
        "y": 2760,
        "wires": [
            []
        ]
    },
    {
        "id": "3b01e0fc67648897",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Aeotec Dining Motion PIR",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.multisensor_dining_motion",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 2400,
        "wires": [
            [
                "53cd8e2f5eb0b187"
            ],
            []
        ]
    },
    {
        "id": "ece843a63b435f41",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Kitchen TV Screen Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.samsung_the_frame_32"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1180,
        "y": 2680,
        "wires": [
            []
        ]
    },
    {
        "id": "6645890597476558",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Living Lights On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_4",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 140,
        "y": 2340,
        "wires": [
            [
                "53cd8e2f5eb0b187"
            ],
            [
                "13695fee7d74a46f"
            ]
        ]
    },
    {
        "id": "4a64e59721b5ad5d",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Start Living Light Timer",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "timer",
        "service": "start",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.living_light_timer"
        ],
        "data": "{\"duration\":\"00:20:00\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1190,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "13695fee7d74a46f",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Finish Living Light Timer",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "timer",
        "service": "finish",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.living_light_timer"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1190,
        "y": 2380,
        "wires": [
            []
        ]
    },
    {
        "id": "c7fda45cdffa03de",
        "type": "server-events",
        "z": "27f4a783.3a8dc8",
        "name": "Living Timer",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "exposeAsEntityConfig": "",
        "eventType": "state_changed",
        "eventData": "{\"entity_id\":\"timer.living_light_timer\"}",
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            },
            {
                "property": "event_type",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            }
        ],
        "x": 130,
        "y": 2520,
        "wires": [
            [
                "edc3f2b308e45886"
            ]
        ]
    },
    {
        "id": "fd171c2a0e10edf9",
        "type": "comment",
        "z": "27f4a783.3a8dc8",
        "name": "Living Lights Automation",
        "info": "",
        "x": 470,
        "y": 2260,
        "wires": []
    },
    {
        "id": "49826c644a7597ea",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Start Laundry Light Timer",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "timer",
        "service": "start",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.laundry_light_timer"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 230,
        "y": 3420,
        "wires": [
            []
        ]
    },
    {
        "id": "19665a993cac735b",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Start DS Toilet Light Timer",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "timer",
        "service": "start",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.downstairs_toilet_timer"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 230,
        "y": 3480,
        "wires": [
            []
        ]
    },
    {
        "id": "74a8b9cf217167b8",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Start Garage Light Timer",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "timer",
        "service": "start",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.garage_lights_timer"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 230,
        "y": 3540,
        "wires": [
            []
        ]
    },
    {
        "id": "e401d0903b4dd364",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Start Front Door Light Timer",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "timer",
        "service": "start",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.frontdoor_light_timer"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 240,
        "y": 3600,
        "wires": [
            []
        ]
    },
    {
        "id": "454b7bc3d4eae4d8",
        "type": "change",
        "z": "27f4a783.3a8dc8",
        "name": "Clear Msg Content",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 2500,
        "wires": [
            [
                "f8ee8ebc.20b36",
                "931d08c1.28dcf8",
                "8628cbaa.6e0518"
            ]
        ]
    },
    {
        "id": "a05e3ebe11775fb0",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Front Door Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.front_door_light_3"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 800,
        "y": 1860,
        "wires": [
            []
        ]
    },
    {
        "id": "52d671c07f721c50",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Front Door Timer NOT Paused",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "paused",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "timer.frontdoor_light_timer",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 790,
        "y": 1700,
        "wires": [
            [
                "e94e560a.804908"
            ],
            []
        ]
    },
    {
        "id": "495feb57371c5510",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Start Front Door Light Timer",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "timer",
        "service": "start",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.frontdoor_light_timer"
        ],
        "data": "{\"duration\":\"00:05:00\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1240,
        "y": 1700,
        "wires": [
            []
        ]
    },
    {
        "id": "0f924bd3f9da1591",
        "type": "server-events",
        "z": "27f4a783.3a8dc8",
        "name": "Front Door Timer",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "exposeAsEntityConfig": "",
        "eventType": "state_changed",
        "eventData": "{\"entity_id\":\"timer.frontdoor_light_timer\"}",
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            },
            {
                "property": "event_type",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            }
        ],
        "x": 140,
        "y": 1840,
        "wires": [
            [
                "e2b61819f99dd150"
            ]
        ]
    },
    {
        "id": "ff95a90c9c8b083a",
        "type": "comment",
        "z": "27f4a783.3a8dc8",
        "name": "Front Door Automation",
        "info": "# Front Door Light Automation",
        "x": 480,
        "y": 1480,
        "wires": []
    },
    {
        "id": "d203c87419a1f49c",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Front Door Light is Off",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.front_door_light_3",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 520,
        "y": 1700,
        "wires": [
            [
                "52d671c07f721c50"
            ],
            []
        ]
    },
    {
        "id": "b4c7b4ac.851d38",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Laundry Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.door_window_sensor_laundry_open",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 100,
        "wires": [
            [
                "f41541aa.8d4ff"
            ],
            [
                "73950d0b.f9b674"
            ]
        ]
    },
    {
        "id": "f41541aa.8d4ff",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Laundry Lights On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_laundry"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 760,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "73950d0b.f9b674",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Laundry Lights Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_laundry"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 770,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "f1407785.f16db8",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Laundry Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.door_window_sensor_laundry_cupboard_open",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 161,
        "y": 40,
        "wires": [
            [
                "f41541aa.8d4ff"
            ],
            [
                "73950d0b.f9b674"
            ]
        ]
    },
    {
        "id": "53cd8e2f5eb0b187",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Living Timer State",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "timer.living_light_timer",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 450,
        "y": 2340,
        "wires": [
            [
                "a8700a0d2f241183"
            ]
        ]
    },
    {
        "id": "a5548247ac1b7a4a",
        "type": "switch",
        "z": "27f4a783.3a8dc8",
        "name": "Timer State Switch",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "idle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "active",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "paused",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 910,
        "y": 2340,
        "wires": [
            [
                "4a64e59721b5ad5d"
            ],
            [
                "4a64e59721b5ad5d"
            ],
            []
        ]
    },
    {
        "id": "a8700a0d2f241183",
        "type": "change",
        "z": "27f4a783.3a8dc8",
        "name": "Clear Data",
        "rules": [
            {
                "t": "set",
                "p": "data",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 2340,
        "wires": [
            [
                "a5548247ac1b7a4a"
            ]
        ]
    },
    {
        "id": "ed3a0b1141ca6553",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Frigate Occupancy Driveway",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.driveway_all_occupancy",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 240,
        "y": 1720,
        "wires": [
            [
                "d203c87419a1f49c"
            ],
            []
        ]
    },
    {
        "id": "8133eaf71b2d3068",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Frigate Occupancy Grass",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.grass_all_occupancy",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 250,
        "y": 1680,
        "wires": [
            [
                "d203c87419a1f49c"
            ],
            []
        ]
    },
    {
        "id": "2a8cdcd1895a1e4b",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Aeotec Dining Motion PIR",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.multisensor_dining_motion",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 230,
        "y": 2840,
        "wires": [
            [
                "ad38f839bbe4c629"
            ],
            []
        ]
    },
    {
        "id": "92dbdd733b5a1716",
        "type": "server-state-changed",
        "z": "27f4a783.3a8dc8",
        "name": "Tradfri Dining Motion PIR",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.tradfri_pir_1",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 230,
        "y": 2880,
        "wires": [
            [
                "ad38f839bbe4c629"
            ],
            []
        ]
    },
    {
        "id": "869aec2d2b3a5ac1",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Is Motion Activated Living Lights",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.motion_activated_living_lights",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1630,
        "y": 2540,
        "wires": [
            [
                "60c3600d.1f3f"
            ],
            []
        ]
    },
    {
        "id": "042352a0a1018cf3",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Is Motion Activated Living Lights",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.motion_activated_living_lights",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1210,
        "y": 2640,
        "wires": [
            [
                "75f28deffcdcce91"
            ],
            []
        ]
    },
    {
        "id": "ad38f839bbe4c629",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Standing Lamp Light is Off",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "switch.tp_link_1",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 600,
        "y": 2860,
        "wires": [
            [
                "6946e6e00433b098"
            ],
            []
        ]
    },
    {
        "id": "6946e6e00433b098",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Living Lamp Timer NOT Paused",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "paused",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "timer.living_lamp_timer",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 910,
        "y": 2860,
        "wires": [
            [
                "7f4b1cd110880387"
            ],
            []
        ]
    },
    {
        "id": "7f4b1cd110880387",
        "type": "api-current-state",
        "z": "27f4a783.3a8dc8",
        "name": "Is Dark",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.is_dark",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1160,
        "y": 2860,
        "wires": [
            [
                "27b7360a9626aebf"
            ],
            []
        ]
    },
    {
        "id": "27b7360a9626aebf",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Start Living Lamp Light Timer",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "timer",
        "service": "start",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "timer.living_lamp_timer"
        ],
        "data": "{\"duration\":\"00:10:00\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1380,
        "y": 2860,
        "wires": [
            []
        ]
    },
    {
        "id": "0adcef60cb2ba8ec",
        "type": "server-events",
        "z": "27f4a783.3a8dc8",
        "name": "Living Lamp Timer",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "exposeAsEntityConfig": "",
        "eventType": "state_changed",
        "eventData": "{\"entity_id\":\"timer.living_lamp_timer\"}",
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            },
            {
                "property": "event_type",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            }
        ],
        "x": 210,
        "y": 2980,
        "wires": [
            [
                "3ae5ed841771e2c0"
            ]
        ]
    },
    {
        "id": "3ae5ed841771e2c0",
        "type": "switch",
        "z": "27f4a783.3a8dc8",
        "name": "Switch Timer Event",
        "property": "payload.event.new_state.state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "active",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "restarted",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "paused",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "idle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "cancelled",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 590,
        "y": 2980,
        "wires": [
            [
                "c2a0adb34cfbd473"
            ],
            [],
            [],
            [
                "58e12873f6727c35"
            ],
            []
        ]
    },
    {
        "id": "c2a0adb34cfbd473",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_1"
        ],
        "data": "{}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 820,
        "y": 2960,
        "wires": [
            []
        ]
    },
    {
        "id": "58e12873f6727c35",
        "type": "api-call-service",
        "z": "27f4a783.3a8dc8",
        "name": "Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_1"
        ],
        "data": "{}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 820,
        "y": 3000,
        "wires": [
            []
        ]
    },
    {
        "id": "edc3f2b308e45886",
        "type": "switch",
        "z": "27f4a783.3a8dc8",
        "name": "Switch Timer Event",
        "property": "payload.event.new_state.state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "active",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "restarted",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "paused",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "idle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "cancelled",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 430,
        "y": 2520,
        "wires": [
            [
                "454b7bc3d4eae4d8"
            ],
            [],
            [],
            [
                "042352a0a1018cf3",
                "ece843a63b435f41",
                "1e95e04c1030b69c",
                "084ac3dba0f0e4b5"
            ],
            []
        ]
    },
    {
        "id": "b3a7dc46346adc51",
        "type": "switch",
        "z": "27f4a783.3a8dc8",
        "name": "Switch Timer Event",
        "property": "payload.event.new_state.state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "active",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "restarted",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "paused",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "idle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "cancelled",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 450,
        "y": 2160,
        "wires": [
            [
                "1f2d5974.8e5757"
            ],
            [],
            [],
            [
                "bce86ceb.13782"
            ],
            []
        ]
    },
    {
        "id": "e2b61819f99dd150",
        "type": "switch",
        "z": "27f4a783.3a8dc8",
        "name": "Switch Timer Event",
        "property": "payload.event.new_state.state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "active",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "restarted",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "paused",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "idle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "cancelled",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 450,
        "y": 1840,
        "wires": [
            [
                "c314f95a.10d298"
            ],
            [],
            [],
            [
                "a05e3ebe11775fb0"
            ],
            []
        ]
    },
    {
        "id": "5fe29861.692358",
        "type": "server-state-changed",
        "z": "a76c0410.5bd8c8",
        "name": "Master Bedroom Lights On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "light.aeon_labs_zw111_nano_dimmer_level_2",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 150,
        "y": 80,
        "wires": [
            [
                "630d350b.bd9b6c"
            ],
            [
                "b97f8a5d.356218",
                "3c9f0dce.9f2062"
            ]
        ]
    },
    {
        "id": "b97f8a5d.356218",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "name": "Master Dressing Room Lights Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_dimmer_dressing_room"
        ],
        "data": "{}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 480,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "630d350b.bd9b6c",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "name": "Master Dressing Room Lights On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_dimmer_dressing_room"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 480,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "3c9f0dce.9f2062",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "name": "Master Bathroom Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_master_bathroom_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 460,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "87b2ac6d.4c31a",
        "type": "server-state-changed",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "Multisensor Movement Detected",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.multisensor_kitchen_motion",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 360,
        "wires": [
            [
                "b92a1924.7c6d18"
            ],
            []
        ]
    },
    {
        "id": "b92a1924.7c6d18",
        "type": "function",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "Check Time 6,7,8am, 5,6pm",
        "func": "var d = new Date();\nvar hour = d.getHours();\nmsg.showweatherforecast = false;\nif([6, 7, 8, 16, 17].includes(hour)) {\n    msg.hour = hour\n    msg.showweatherforecast = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 360,
        "wires": [
            [
                "3cfb1a05.8a6536"
            ]
        ]
    },
    {
        "id": "3cfb1a05.8a6536",
        "type": "switch",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "Is Weather Forecast",
        "property": "showweatherforecast",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 760,
        "y": 360,
        "wires": [
            [
                "391813eb.8f75ec"
            ],
            [
                "33f643f5.9e421c"
            ]
        ]
    },
    {
        "id": "f08728ea.bc4b28",
        "type": "inject",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 900,
        "y": 420,
        "wires": [
            [
                "33f643f5.9e421c"
            ]
        ]
    },
    {
        "id": "391813eb.8f75ec",
        "type": "api-current-state",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "Max Temp",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.bom_forecast_temp_max_0",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "maxCelcius",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1130,
        "y": 260,
        "wires": [
            [
                "888beca9.76b15"
            ]
        ]
    },
    {
        "id": "33f643f5.9e421c",
        "type": "function",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "Between 9pm and 7am",
        "func": "var d = new Date();\nvar hour = d.getHours();\n\nif(hour >= 21 || hour <= 7) {\n    msg.brightness = 25\n}\nelse {\n    msg.brightness = 100\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 420,
        "wires": [
            [
                "a70c9f5c.1e87d"
            ]
        ]
    },
    {
        "id": "a70c9f5c.1e87d",
        "type": "api-current-state",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "Is Dark",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.is_dark",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1420,
        "y": 420,
        "wires": [
            [
                "eebf587.6757aa8"
            ],
            []
        ]
    },
    {
        "id": "6adc2dfc.e299d4",
        "type": "function",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "Extract Weather Data",
        "func": "msg.cycles = 36\nmsg.period = 8\n\nif([6, 7, 8].includes(msg.hour)) {\n    msg.color_name = returnColourNameDayTime(msg.maxCelcius);\n}\nelse if([16, 17].includes(msg.hour)) {\n    msg.color_name = returnColourNameNightTime(msg.minCelcius)\n}\nelse {\n    msg.color_name = returnColourNameDayTime(msg.minCelcius)\n}\n\n\nmsg.mode = msg.rainPercent > 50 ? \"strobe\" : \"breathe\";\n\nfunction returnColourNameDayTime(tempCelcius) {\n    if(tempCelcius >= 25) return \"red\";\n    else if(tempCelcius < 25 && tempCelcius >= 19) return \"green\";\n    else if(tempCelcius < 18) return \"teal\"\n    else return \"gold\";\n}\n\nfunction returnColourNameNightTime(tempCelcius) {\n    if(tempCelcius >= 22) return \"red\";\n    else if(tempCelcius < 22 && tempCelcius >= 17) return \"green\";\n    else if(tempCelcius < 17) return \"teal\"\n    else return \"gold\";\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1900,
        "y": 260,
        "wires": [
            [
                "298d569c.4bec9a",
                "a74396b1.ee6358"
            ]
        ]
    },
    {
        "id": "eebf587.6757aa8",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "Rumpus Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_rumpus_standing"
        ],
        "data": "{\"brightness_pct\":\"{{brightness}}\",\"kelvin\":\"2500\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1650,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "298d569c.4bec9a",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "Rumpus Light Effect",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_rumpus_standing"
        ],
        "data": "{\"color_name\":\"{{color_name}}\",\"transition\":1}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 2120,
        "y": 260,
        "wires": [
            [
                "67d51aa0.3ee464"
            ]
        ]
    },
    {
        "id": "888beca9.76b15",
        "type": "api-current-state",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "Min Temp",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "unknown",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "sensor.bom_forecast_temp_min_0",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "minCelcius",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1320,
        "y": 260,
        "wires": [
            [
                "f004f152.4c7d6"
            ],
            [
                "f3933c6e.eef0b"
            ]
        ]
    },
    {
        "id": "f004f152.4c7d6",
        "type": "api-current-state",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "Rain %",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.bom_forecast_rain_chance_0",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "rainPercent",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1680,
        "y": 260,
        "wires": [
            [
                "6adc2dfc.e299d4"
            ]
        ]
    },
    {
        "id": "67d51aa0.3ee464",
        "type": "debug",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2330,
        "y": 260,
        "wires": []
    },
    {
        "id": "4d01c8ab.f938c8",
        "type": "inject",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 920,
        "y": 260,
        "wires": [
            [
                "391813eb.8f75ec"
            ]
        ]
    },
    {
        "id": "a74396b1.ee6358",
        "type": "debug",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2320,
        "y": 160,
        "wires": []
    },
    {
        "id": "f3933c6e.eef0b",
        "type": "api-current-state",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "Min Temp",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "sensor.bom_forecast_temp_min_1",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "minCelcius",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1500,
        "y": 320,
        "wires": [
            [
                "f004f152.4c7d6"
            ]
        ]
    },
    {
        "id": "264b49d1.d9da06",
        "type": "comment",
        "z": "a76c0410.5bd8c8",
        "name": "What is this?",
        "info": "Sometimes BOM returns Unknown for Day_0 Min.\nThis will fallback to the next day's min",
        "x": 1530,
        "y": 160,
        "wires": []
    },
    {
        "id": "8ce676d0.811df8",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "d": true,
        "name": "Rumpus Light Effect (Temp)",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "lifx",
        "service": "effect_pulse",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_rumpus_standing"
        ],
        "data": "{\"color_name\":\"{{color_name}}\",\"cycles\":\"{{cycles}}\",\"period\":\"{{period}}\",\"mode\":\"{{mode}}\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 2140,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "12cb33aa11aaaa88",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "name": "Turn on Rumpus Standing Light",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_4"
        ],
        "data": "{}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 710,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "627fd0a21b5f8e02",
        "type": "api-current-state",
        "z": "a76c0410.5bd8c8",
        "name": "Is Dark",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "binary_sensor.is_dark",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 440,
        "y": 500,
        "wires": [
            [
                "12cb33aa11aaaa88"
            ],
            []
        ]
    },
    {
        "id": "34cc0e55892ea98b",
        "type": "server-state-changed",
        "z": "a76c0410.5bd8c8",
        "name": "Multisensor Movement Detected",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.multisensor_kitchen_motion",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 500,
        "wires": [
            [
                "627fd0a21b5f8e02"
            ],
            []
        ]
    },
    {
        "id": "80db79e16f086b47",
        "type": "api-call-service",
        "z": "a76c0410.5bd8c8",
        "name": "",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [
            "7a64ad814d794514b79ea6794f052806"
        ],
        "entityId": [],
        "data": "{}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 720,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "b1bd37a0.3b11a8",
        "type": "inject",
        "z": "d1ff6abb.b25cf8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 340,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "aac1125.91b50f",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "TTS Announce",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "tts",
        "service": "google_translate_say",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.kitchen_speaker"
        ],
        "data": "{\"message\":\"Did you forget the coffee machine on?\"}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 540,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "f7046b1d.dc9608",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Rumpus Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_4",
            "switch.tp_link_4"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 890,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "a83b522e.8ac79",
        "type": "server-state-changed",
        "z": "d1ff6abb.b25cf8",
        "name": "Rumpus Multisensor Motion Detected",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.multisensor_kitchen_motion",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 230,
        "y": 140,
        "wires": [
            [
                "9bc6106a.d6826"
            ],
            [
                "9bc6106a.d6826"
            ]
        ]
    },
    {
        "id": "47da4960.9cb9e8",
        "type": "trigger",
        "z": "d1ff6abb.b25cf8",
        "name": "2 Minutes No Movement",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "2",
        "extend": false,
        "units": "min",
        "reset": "on",
        "bytopic": "all",
        "outputs": 1,
        "x": 590,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "d479eebc.741a9",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Dressing Room Lights Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_dimmer_dressing_room"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 910,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "984dbc07.b46aa",
        "type": "server-state-changed",
        "z": "d1ff6abb.b25cf8",
        "name": "Master Bathroom Extractor Fan On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "switch.shelly_2_5_master_bathroom_extractor",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 220,
        "y": 242,
        "wires": [
            [
                "bb8290ff.7ae97"
            ],
            []
        ]
    },
    {
        "id": "bb8290ff.7ae97",
        "type": "trigger",
        "z": "d1ff6abb.b25cf8",
        "name": "Wait for 5 minutes",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "5",
        "extend": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "outputs": 1,
        "x": 570,
        "y": 242,
        "wires": [
            [
                "8cf3895e.ec7548"
            ]
        ]
    },
    {
        "id": "8cf3895e.ec7548",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Extractor Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.shelly_2_5_master_bathroom_extractor"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 870,
        "y": 242,
        "wires": [
            [
                "eeaca92138ef67b7"
            ]
        ]
    },
    {
        "id": "10cba9c8.90d376",
        "type": "server-state-changed",
        "z": "d1ff6abb.b25cf8",
        "name": "Kids Bathroom Extractor Fan On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "switch.shelly_2_5_kids_bathroom_extractor",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 210,
        "y": 302,
        "wires": [
            [
                "25c076d3.d6444a"
            ],
            []
        ]
    },
    {
        "id": "25c076d3.d6444a",
        "type": "trigger",
        "z": "d1ff6abb.b25cf8",
        "name": "Wait for 5 minutes",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "5",
        "extend": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "outputs": 1,
        "x": 570,
        "y": 302,
        "wires": [
            [
                "55c1e0c2.3e88d"
            ]
        ]
    },
    {
        "id": "55c1e0c2.3e88d",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Extractor Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.shelly_2_5_kids_bathroom_extractor"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 870,
        "y": 302,
        "wires": [
            [
                "425b2757a777d3f8"
            ]
        ]
    },
    {
        "id": "bef39887.1b7ec8",
        "type": "server-state-changed",
        "z": "d1ff6abb.b25cf8",
        "name": "Upstairs Toilet Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_3",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 389,
        "wires": [
            [
                "53b5f2a.e5a580c"
            ],
            [
                "53b5f2a.e5a580c"
            ]
        ]
    },
    {
        "id": "da09d68f.b33588",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Turn off Toilet Lights",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_3"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 900,
        "y": 389,
        "wires": [
            []
        ]
    },
    {
        "id": "53b5f2a.e5a580c",
        "type": "trigger",
        "z": "d1ff6abb.b25cf8",
        "name": "30 Minutes",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "30",
        "extend": false,
        "units": "min",
        "reset": "off",
        "bytopic": "all",
        "outputs": 1,
        "x": 550,
        "y": 389,
        "wires": [
            [
                "da09d68f.b33588"
            ]
        ]
    },
    {
        "id": "bb42fd54.effe9",
        "type": "trigger",
        "z": "d1ff6abb.b25cf8",
        "name": "30 Seconds No Movement",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "30",
        "extend": false,
        "units": "s",
        "reset": "on",
        "bytopic": "all",
        "outputs": 1,
        "x": 600,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "2080582f.f25708",
        "type": "trigger",
        "z": "d1ff6abb.b25cf8",
        "name": "10 Minutes",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "10",
        "extend": false,
        "units": "min",
        "reset": "on",
        "bytopic": "all",
        "outputs": 1,
        "x": 730,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "9bc6106a.d6826",
        "type": "stoptimer3",
        "z": "d1ff6abb.b25cf8",
        "duration": "10",
        "durationType": "num",
        "units": "Minute",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "10 Minute Stop Timer",
        "x": 580,
        "y": 140,
        "wires": [
            [
                "f7046b1d.dc9608"
            ],
            []
        ]
    },
    {
        "id": "eeaca92138ef67b7",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Extractor Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.shelly_2_5_master_bathroom_extractor"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1050,
        "y": 240,
        "wires": [
            [
                "397cac25909df99d"
            ]
        ]
    },
    {
        "id": "397cac25909df99d",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Extractor Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.shelly_2_5_master_bathroom_extractor"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1230,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "425b2757a777d3f8",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Extractor Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.shelly_2_5_kids_bathroom_extractor"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1050,
        "y": 300,
        "wires": [
            [
                "7a6ebec0e99a03e4"
            ]
        ]
    },
    {
        "id": "7a6ebec0e99a03e4",
        "type": "api-call-service",
        "z": "d1ff6abb.b25cf8",
        "name": "Extractor Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.shelly_2_5_kids_bathroom_extractor"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1230,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "74e177f.a451188",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Coffee Machine Goes On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "switch.tp_link_strip1_1",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 270,
        "y": 140,
        "wires": [
            [
                "9dccf6.934c4308"
            ],
            [
                "7d1a13b7.25754c"
            ]
        ]
    },
    {
        "id": "7d1a13b7.25754c",
        "type": "change",
        "z": "191e949e.9f212b",
        "name": "Reset",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 180,
        "wires": [
            [
                "9dccf6.934c4308"
            ]
        ]
    },
    {
        "id": "9dccf6.934c4308",
        "type": "delay",
        "z": "191e949e.9f212b",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "hours",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 700,
        "y": 140,
        "wires": [
            [
                "30460a9c.539026"
            ]
        ]
    },
    {
        "id": "30460a9c.539026",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Coffee Machine Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_strip1_1"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 970,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "17d42f68.94d161",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Laundry Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "light.shelly_1_laundry",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 240,
        "y": 320,
        "wires": [
            [
                "35fb861e.3d82ea"
            ],
            [
                "35fb861e.3d82ea"
            ]
        ]
    },
    {
        "id": "2c960bec.75b3f4",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Laundry Lights Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_laundry"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 970,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "35fb861e.3d82ea",
        "type": "trigger",
        "z": "191e949e.9f212b",
        "name": "15 Minutes",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "15",
        "extend": false,
        "units": "min",
        "reset": "off",
        "bytopic": "all",
        "outputs": 1,
        "x": 710,
        "y": 320,
        "wires": [
            [
                "2c960bec.75b3f4"
            ]
        ]
    },
    {
        "id": "5a3862d6.d1321c",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Stairs Landing Motion Detected PIR",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.tradfri_pir_2",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 300,
        "y": 660,
        "wires": [
            [
                "b5a89aa9.7d4c68"
            ],
            []
        ]
    },
    {
        "id": "8901a4e2.ad5778",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Stairs Landing Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_powder_room_basin_light",
            "light.shelly_2_5_stairs_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 990,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "e3046060.989b7",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Front Door Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.dimmer_foyer_light_level"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 970,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "235f0d1.5dccdf2",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Asakuki Diffuser Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.diffuser_fan"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 970,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "b5a89aa9.7d4c68",
        "type": "stoptimer3",
        "z": "191e949e.9f212b",
        "duration": "3",
        "durationType": "num",
        "units": "Minute",
        "payloadtype": "num",
        "payloadval": "0",
        "name": "3 Minute Stop Timer",
        "x": 680,
        "y": 660,
        "wires": [
            [
                "8901a4e2.ad5778",
                "e3046060.989b7",
                "235f0d1.5dccdf2",
                "43bf00ea.87ba8",
                "a4939c4d.cd26c"
            ],
            []
        ]
    },
    {
        "id": "c990c1f6.731ed",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Downstairs Toilet Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "switch.aeon_labs_dsc18103_micro_smart_switch_2nd_edition_switch",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 270,
        "y": 400,
        "wires": [
            [
                "8256f215.2d5"
            ],
            [
                "8256f215.2d5"
            ]
        ]
    },
    {
        "id": "4191a48b.86c49c",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Turn off Toilet Lights",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.aeon_labs_dsc18103_micro_smart_switch_2nd_edition_switch"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 980,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "8256f215.2d5",
        "type": "trigger",
        "z": "191e949e.9f212b",
        "name": "5 Minutes",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "5",
        "extend": false,
        "units": "min",
        "reset": "off",
        "bytopic": "all",
        "outputs": 1,
        "x": 700,
        "y": 400,
        "wires": [
            [
                "4191a48b.86c49c"
            ]
        ]
    },
    {
        "id": "cf35861a.162cf8",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Garage Flood Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "light.garage_flood_light",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 260,
        "y": 480,
        "wires": [
            [
                "90a7a3bb.f93ac"
            ],
            [
                "90a7a3bb.f93ac"
            ]
        ]
    },
    {
        "id": "90a7a3bb.f93ac",
        "type": "trigger",
        "z": "191e949e.9f212b",
        "name": "1 Hour",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "hr",
        "reset": "off",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 690,
        "y": 480,
        "wires": [
            [
                "9396ad98.75b8f"
            ]
        ]
    },
    {
        "id": "9396ad98.75b8f",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Garage Flood Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.garage_flood_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 980,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "98eeeb38.26da68",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Garage Lifx Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_garage"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 980,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "28cb1048.3ddbd",
        "type": "trigger",
        "z": "191e949e.9f212b",
        "name": "1 Hour",
        "op1": "",
        "op2": "off",
        "op1type": "nul",
        "op2type": "str",
        "duration": "1",
        "extend": false,
        "units": "hr",
        "reset": "off",
        "bytopic": "all",
        "outputs": 1,
        "x": 690,
        "y": 540,
        "wires": [
            [
                "98eeeb38.26da68"
            ]
        ]
    },
    {
        "id": "ea46acb4.dbd9",
        "type": "server-state-changed",
        "z": "191e949e.9f212b",
        "name": "Garage Lifx Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "light.lifx_garage",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 250,
        "y": 540,
        "wires": [
            [
                "28cb1048.3ddbd"
            ],
            [
                "28cb1048.3ddbd"
            ]
        ]
    },
    {
        "id": "43bf00ea.87ba8",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "Foyer Lamp Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.dimmer_foyer_light_level"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 960,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "a4939c4d.cd26c",
        "type": "api-call-service",
        "z": "191e949e.9f212b",
        "name": "XMAS Tree Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.xmas_tree"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 960,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "b7d0ae54.64a9b",
        "type": "mqtt in",
        "z": "e594dd4a.60761",
        "name": "OpenMQTTGateway",
        "topic": "home/OpenMQTTGateway/433toMQTT",
        "qos": "2",
        "datatype": "json",
        "broker": "32add66e.5cfcaa",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 150,
        "y": 1380,
        "wires": [
            [
                "dac700f1.84a69",
                "5d6242a8.bd6e0c",
                "c4997e2b.e67ca",
                "913f472d.b8fe48",
                "f99a6463.ac20e8",
                "79e20253.d1af0c",
                "4cd028b4.97df38",
                "74c842ef.781fcc",
                "a30e1a2f.ab8ad8"
            ]
        ]
    },
    {
        "id": "5d6242a8.bd6e0c",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 B",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2599028",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 380,
        "y": 1500,
        "wires": [
            []
        ]
    },
    {
        "id": "dac700f1.84a69",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 A",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2599032",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 380,
        "y": 1460,
        "wires": [
            []
        ]
    },
    {
        "id": "913f472d.b8fe48",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 D",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2599025",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 380,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "c4997e2b.e67ca",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 C",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2599026",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 380,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "f99a6463.ac20e8",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 2 D",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "6402353",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 380,
        "y": 1420,
        "wires": [
            []
        ]
    },
    {
        "id": "79e20253.d1af0c",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 2 C",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "6402354",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 380,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "4cd028b4.97df38",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 2 A",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "6402360",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 380,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "57e54d0e.155fb4",
        "type": "server-state-changed",
        "z": "e594dd4a.60761",
        "name": "Turn off upstairs lights",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.off_upstairs_lights",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 720,
        "wires": [
            [
                "dac60e5f.a75de"
            ],
            []
        ]
    },
    {
        "id": "e60c716c.0e6f4",
        "type": "server-state-changed",
        "z": "e594dd4a.60761",
        "name": "Turn off downstairs lights",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.off_downstairs_lights",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 190,
        "y": 860,
        "wires": [
            [
                "7f9a2e57.51d76"
            ],
            []
        ]
    },
    {
        "id": "a5c7e5d.0618718",
        "type": "server-state-changed",
        "z": "e594dd4a.60761",
        "name": "Turn off all lights",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.off_all_lights",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 800,
        "wires": [
            [
                "f4a95c2f.07974",
                "924ef799.d4d6e8"
            ],
            []
        ]
    },
    {
        "id": "f4a95c2f.07974",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "All Lights off routine off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.off_all_lights"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 610,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "74c842ef.781fcc",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Push Button 1",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2615892",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 400,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "a30e1a2f.ab8ad8",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Push Button 2",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "12137384",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 400,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "5189a580.57236c",
        "type": "server-events",
        "z": "e594dd4a.60761",
        "name": "IOS Action Fired",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "exposeAsEntityConfig": "",
        "eventType": "ios.action_fired",
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            },
            {
                "property": "event_type",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            }
        ],
        "x": 140,
        "y": 1120,
        "wires": [
            [
                "2f17f9d2.58f5c6"
            ]
        ]
    },
    {
        "id": "2f17f9d2.58f5c6",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "IOS Action Switch",
        "property": "payload.event.actionName",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Upstairs Lights",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Downstairs Lights",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "All Lights",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 370,
        "y": 1120,
        "wires": [
            [
                "74007b3e.bf1d44"
            ],
            [
                "cc7b53ee.56ba8"
            ],
            [
                "c00cd6d2.6686b8"
            ]
        ]
    },
    {
        "id": "81b0e6ac.176b68",
        "type": "mqtt in",
        "z": "e594dd4a.60761",
        "name": "RTL2MQTT",
        "topic": "rtl_433/+/events",
        "qos": "2",
        "datatype": "json",
        "broker": "32add66e.5cfcaa",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 150,
        "y": 280,
        "wires": [
            [
                "3e0c75cc.9b404a"
            ]
        ]
    },
    {
        "id": "b58d20d.40ccde",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 2 A",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1c8d86",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 699,
        "y": 250,
        "wires": [
            []
        ]
    },
    {
        "id": "eb47eba1.d27118",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 2 C",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "4c8d86",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "a11843a6.88452",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 2 D",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "8c8d86",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 370,
        "wires": [
            []
        ]
    },
    {
        "id": "b5bedeff.1ff03",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Push Button 1",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "758586",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 720,
        "y": 120,
        "wires": [
            [
                "43551a9f.1a2844"
            ]
        ]
    },
    {
        "id": "38261683.6962aa",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 A",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1e15e4",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 680,
        "y": 440,
        "wires": [
            [
                "40cfba2e.341dc4"
            ]
        ]
    },
    {
        "id": "daf39aae.c621c8",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 B",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2e15e4",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 680,
        "y": 500,
        "wires": [
            [
                "3e4aef50.938c1"
            ]
        ]
    },
    {
        "id": "99498fe5.b1944",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 C",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "4e15e4",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 680,
        "y": 560,
        "wires": [
            [
                "c64ca96.3c9ac58"
            ]
        ]
    },
    {
        "id": "cf24d26d.efd03",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "DRC 1 D",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "8e15e4",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 680,
        "y": 620,
        "wires": [
            [
                "fe206ad0.541208"
            ]
        ]
    },
    {
        "id": "7f9a2e57.51d76",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off Downstairs",
        "topic": "nodered-custom/lights/turn-off-downstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 630,
        "y": 860,
        "wires": []
    },
    {
        "id": "dac60e5f.a75de",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off Upstairs All",
        "topic": "nodered-custom/lights/turn-off-upstairs-all",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 630,
        "y": 715,
        "wires": []
    },
    {
        "id": "3e0c75cc.9b404a",
        "type": "change",
        "z": "e594dd4a.60761",
        "name": "Clear Data Attribute",
        "rules": [
            {
                "t": "delete",
                "p": "payload.data",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 280,
        "wires": [
            [
                "b5bedeff.1ff03",
                "b58d20d.40ccde",
                "eb47eba1.d27118",
                "a11843a6.88452",
                "38261683.6962aa",
                "daf39aae.c621c8",
                "99498fe5.b1944",
                "cf24d26d.efd03",
                "e0b9114e.417bd"
            ]
        ]
    },
    {
        "id": "e0b9114e.417bd",
        "type": "switch",
        "z": "e594dd4a.60761",
        "name": "Push Button 2",
        "property": "payload.id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "163493",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 720,
        "y": 160,
        "wires": [
            [
                "e5052fba.a2705"
            ]
        ]
    },
    {
        "id": "67140cff.069504",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Master Dressing Room Lights Toggle",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_dimmer_dressing_room"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1150,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "e5052fba.a2705",
        "type": "debounce",
        "z": "e594dd4a.60761",
        "time": "1000",
        "name": "",
        "x": 900,
        "y": 160,
        "wires": [
            [
                "67140cff.069504"
            ]
        ]
    },
    {
        "id": "c12cc665.101d48",
        "type": "inject",
        "z": "e594dd4a.60761",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 980,
        "wires": [
            [
                "801bdce2.f1044"
            ]
        ]
    },
    {
        "id": "801bdce2.f1044",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Guest Room Lamp Toggle",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.hue_bulb_2",
            "light.hue_bulb_2"
        ],
        "data": "{\"transition\":\"5\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 410,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "43551a9f.1a2844",
        "type": "debounce",
        "z": "e594dd4a.60761",
        "time": "1000",
        "name": "",
        "x": 900,
        "y": 120,
        "wires": [
            [
                "78115e193fbaa00b"
            ]
        ]
    },
    {
        "id": "b3001fe9.49254",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Stop Music Downstairs",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "media_player",
        "service": "media_stop",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.downstairs"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1860,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "220a198d.f6db36",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Start Music Downstairs",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "spotcast",
        "service": "start",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.downstairs"
        ],
        "data": "{\"uri\":\"{{randomPlaylist.uri}}\",\"random_song\":true,\"force_playback\":true}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 2117,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "d2023620.5170c8",
        "type": "api-current-state",
        "z": "e594dd4a.60761",
        "name": "Downstairs Is Playing",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "playing",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "media_player.downstairs",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1620,
        "y": 120,
        "wires": [
            [
                "b3001fe9.49254"
            ],
            [
                "17315006.19269"
            ]
        ]
    },
    {
        "id": "17315006.19269",
        "type": "function",
        "z": "e594dd4a.60761",
        "name": "Choose Random Playlist",
        "func": "let playlistsArray = [\n    {\n        uri : \"spotify:playlist:37i9dQZF1E4EFyuVOygvQ7\", \n        desc : \"Air Radio\",\n    },\n    {\n        uri : \"spotify:playlist:37i9dQZF1E39OdKMfKM663\", \n        desc : \"Tame Impala, Two Door Cinema, Gang of Youths\",\n    },\n    {\n        uri : \"spotify:playlist:37i9dQZF1E35sNS8MhSVoM\", \n        desc : \"Nightmares on Wax, Zero 7 etc\",\n    },\n    \n]\n\nvar randomPlaylist = playlistsArray[Math.floor(Math.random()*playlistsArray.length)];\nmsg.randomPlaylist = randomPlaylist;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1870,
        "y": 140,
        "wires": [
            [
                "220a198d.f6db36"
            ]
        ]
    },
    {
        "id": "924ef799.d4d6e8",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off ALL",
        "topic": "nodered-custom/lights/turn-off-all",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 610,
        "y": 760,
        "wires": []
    },
    {
        "id": "74007b3e.bf1d44",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off Upstairs ALL",
        "topic": "nodered-custom/lights/turn-off-upstairs-all",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 740,
        "y": 1080,
        "wires": []
    },
    {
        "id": "cc7b53ee.56ba8",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off Downstairs",
        "topic": "nodered-custom/lights/turn-off-downstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 730,
        "y": 1120,
        "wires": []
    },
    {
        "id": "c00cd6d2.6686b8",
        "type": "mqtt out",
        "z": "e594dd4a.60761",
        "name": "Pub MQTT Turn Off All",
        "topic": "nodered-custom/lights/turn-off-all",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 700,
        "y": 1160,
        "wires": []
    },
    {
        "id": "c64ca96.3c9ac58",
        "type": "function",
        "z": "e594dd4a.60761",
        "name": "Random Colour",
        "func": "let colourR = Math.floor(Math.random() * 256);\nlet colourG = Math.floor(Math.random() * 256);\nlet colourB = Math.floor(Math.random() * 256);\n\nmsg.payload.data = {}\nmsg.payload.data.rgb_color = [colourR, colourG, colourB];\nmsg.payload.data.entity_id = \"light.wled_2\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 920,
        "y": 560,
        "wires": [
            [
                "b231c980.6cd8e8"
            ]
        ]
    },
    {
        "id": "fe206ad0.541208",
        "type": "function",
        "z": "e594dd4a.60761",
        "name": "Cycle Brightness",
        "func": "\n\nbrightness_pct = global.get(\"Wled82BrightnessPct\");\nif(brightness_pct) brightness_pct += 20;\nelse brightness_pct = 100;\n\n\nbrightness_pct = brightness_pct > 100 ? 20 : brightness_pct;\n\n\nglobal.set(\"Wled82BrightnessPct\",brightness_pct);\n\nmsg.payload.data = {}\nmsg.payload.data.brightness_pct = brightness_pct;\nmsg.payload.data.entity_id = \"light.wled_2\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 930,
        "y": 620,
        "wires": [
            [
                "151bd4e7.7612db"
            ]
        ]
    },
    {
        "id": "40cfba2e.341dc4",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Toggle Light",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.wled_2"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1130,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "5648d108.0d1b",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Set Effect",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1120,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "3e4aef50.938c1",
        "type": "function",
        "z": "e594dd4a.60761",
        "name": "Random Effect",
        "func": "var effects = [\"Android\",\"Blends\",\"Blink\",\"Blink Rainbow\",\"Bouncing Balls\",\"Bpm\",\"Breathe\",\"Candle\",\"Candle Multi\",\"Candy Cane\",\"Chase\",\"Chase Flash\",\"Chase Flash Rnd\",\"Chase Rainbow\",\"Chase Random\",\"Chunchun\",\"Circus\",\"Colorful\",\"Colorloop\",\"Colortwinkles\",\"Colorwaves\",\"Dancing Shadows\",\"Dissolve\",\"Dissolve Rnd\",\"Drip\",\"Dynamic\",\"Fade\",\"Fill Noise\",\"Fire 2012\",\"Fire Flicker\",\"Fireworks\",\"Fireworks 1D\",\"Fireworks Starburst\",\"Flow\",\"Glitter\",\"Gradient\",\"Halloween\",\"Halloween Eyes\",\"Heartbeat\",\"ICU\",\"Juggle\",\"Lake\",\"Lighthouse\",\"Lightning\",\"Loading\",\"Merry Christmas\",\"Meteor\",\"Meteor Smooth\",\"Multi Comet\",\"Noise 1\",\"Noise 2\",\"Noise 3\",\"Noise 4\",\"Noise Pal\",\"Oscillate\",\"Pacifica\",\"Palette\",\"Percent\",\"Phased\",\"Phased Noise\",\"Plasma\",\"Police\",\"Police All\",\"Popcorn\",\"Pride 2015\",\"Railway\",\"Rain\",\"Rainbow\",\"Rainbow Runner\",\"Random Colors\",\"Red & Blue\",\"Ripple\",\"Ripple Rainbow\",\"Running\",\"Running 2\",\"Saw\",\"Scan\",\"Scan Dual\",\"Scanner\",\"Scanner Dual\",\"Sine\",\"Sinelon\",\"Sinelon Dual\",\"Sinelon Rainbow\",\"Solid\",\"Solid Glitter\",\"Solid Pattern\",\"Solid Pattern Tri\",\"Sparkle\",\"Sparkle Dark\",\"Sparkle+\",\"Spots\",\"Spots Fade\",\"Stream\",\"Stream 2\",\"Strobe\",\"Strobe Mega\",\"Strobe Rainbow\",\"Sunrise\",\"Sweep\",\"Sweep Random\",\"Theater\",\"Theater Rainbow\",\"Traffic Light\",\"Tri Chase\",\"Tri Fade\",\"Tri Wipe\",\"Twinkle\",\"Twinklecat\",\"Twinklefox\",\"Twinkleup\",\"Two Areas\",\"Two Dots\",\"Washing Machine\",\"Wipe\",\"Wipe Random\"];\nvar effect = effects[Math.floor(Math.random()*effects.length)];\n\nmsg.payload.data = {}\nmsg.payload.data.effect = effect;\nmsg.payload.data.entity_id = \"light.wled_2\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 920,
        "y": 500,
        "wires": [
            [
                "5648d108.0d1b"
            ]
        ]
    },
    {
        "id": "151bd4e7.7612db",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Set Brightness",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1140,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "b231c980.6cd8e8",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Set Random Colour",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "Ettienne"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1150,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "6a604c73c7df351b",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Close Curtain",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "cover",
        "service": "close_cover",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "cover.switchbot_curtains"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1420,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "78115e193fbaa00b",
        "type": "api-current-state",
        "z": "e594dd4a.60761",
        "name": "Curtain Current State Opening",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "opening",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "cover.switchbot_curtains",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1130,
        "y": 120,
        "wires": [
            [
                "6a604c73c7df351b"
            ],
            [
                "87d3c46fbdecac94"
            ]
        ]
    },
    {
        "id": "87d3c46fbdecac94",
        "type": "api-call-service",
        "z": "e594dd4a.60761",
        "name": "Open Curtain",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "cover",
        "service": "open_cover",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "cover.switchbot_curtains"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1410,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "9198f0a3.5ee2c",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": " Front Door Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.front_door_light_3"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 550,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "822602a.5c051",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Foyer Standing Lamp Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.dimmer_foyer_light_level"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 590,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "7693dfac.811d3",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Alex Kitchen Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_alex_kitchen_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 560,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "3ec87a06.4ff786",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Pantry Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_pantry"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 540,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "4109e42.497951c",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Laundry Lights Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_laundry"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 550,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "cb73e99d.71eec8",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Study Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_study_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 540,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "cc63de0e.0ec94",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Family Room Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_4"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 560,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "6974e2dd.6038fc",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Stairs Closet Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_stairs_closet"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 560,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "85886241.b88fa",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Downstairs Toilet Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.aeon_labs_dsc18103_micro_smart_switch_2nd_edition_switch"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 570,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "8f3410c8.0297f",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Powder Room Basin Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_powder_room_basin_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 590,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "9210a131.c79cf",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Stairs Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_stairs_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 540,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "790ccf3f.8bb74",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Lounge Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.aeon_labs_zw111_nano_dimmer_level"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 540,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "d2900a52.2d3b58",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Downstairs Lights off routine off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.off_downstairs_lights"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 590,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "9c3fa3b4.31473",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Kitchen Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_kitchen_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 540,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "ca472daa.b6f5b",
        "type": "mqtt in",
        "z": "9a1b490a16d77e03",
        "name": "Sub MQTT Turn Off Downstairs",
        "topic": "nodered-custom/lights/turn-off-downstairs",
        "qos": "1",
        "datatype": "auto",
        "broker": "32add66e.5cfcaa",
        "inputs": 0,
        "x": 230,
        "y": 440,
        "wires": [
            [
                "9198f0a3.5ee2c",
                "9c3fa3b4.31473",
                "d2900a52.2d3b58",
                "790ccf3f.8bb74",
                "9210a131.c79cf",
                "8f3410c8.0297f",
                "85886241.b88fa",
                "6974e2dd.6038fc",
                "cc63de0e.0ec94",
                "cb73e99d.71eec8",
                "4109e42.497951c",
                "3ec87a06.4ff786",
                "7693dfac.811d3",
                "822602a.5c051",
                "67575eed.382c",
                "8ae27abd.d21ba8",
                "d89a20ba.53d76",
                "660803de.1305ec",
                "a3a9f13847164f1b",
                "b40f8a3ad8389236",
                "29407d9c4a531491",
                "2b126dfd9437d65a"
            ]
        ]
    },
    {
        "id": "9cae572f.8da578",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Guest Room Lamp Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.hue_bulb_2",
            "light.hue_bulb_2"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1360,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "67575eed.382c",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Garden Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.garden_lights"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 530,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "8ae27abd.d21ba8",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "WLED2 Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.wled_2"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 530,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "d89a20ba.53d76",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Kitchen Benchtop",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.wled"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 550,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "660803de.1305ec",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Study Bias Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_strip_1"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 540,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "a3a9f13847164f1b",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "XMAS Tree Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.xmas_tree"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 540,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "71dd1393.ea52dc",
        "type": "mqtt in",
        "z": "9a1b490a16d77e03",
        "name": "Sub MQTT Turn Off Upstairs",
        "topic": "nodered-custom/lights/turn-off-upstairs",
        "qos": "1",
        "datatype": "auto",
        "broker": "32add66e.5cfcaa",
        "inputs": 0,
        "x": 940,
        "y": 460,
        "wires": [
            [
                "d371bfec.d293a",
                "a61375ba.3a7088",
                "1e39803a.e8f9a",
                "67d201ba.1d915",
                "3d518e8a.371632",
                "66aa4e78.ed2db",
                "69ca3e64.f9dca",
                "46a06294.3989dc",
                "e852558e.87eb58",
                "ff9936a2.d714b8",
                "c886bbbe.d31fd8",
                "32edec0c.b20764",
                "e39fd5c3615e9149",
                "18f78f69ed88f852",
                "fad172eb5157bd4b"
            ]
        ]
    },
    {
        "id": "d371bfec.d293a",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Alex Room Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.alex_ceiling_fan"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1360,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "a61375ba.3a7088",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Ruby Room Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.ruby_ceiling_fan"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1360,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "1e39803a.e8f9a",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Master Room Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.aeon_labs_zw111_nano_dimmer_level_2"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1360,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "67d201ba.1d915",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Rumpus Main Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_rumpus_main_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1360,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "3d518e8a.371632",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Rumpus Side Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_rumpus_side_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1360,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "66aa4e78.ed2db",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Rumpus Standing Lamp Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_4"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1400,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "69ca3e64.f9dca",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Kids Bathroom Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_kids_bathroom_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1370,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "46a06294.3989dc",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Kids Toilet Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_3"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1350,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "e852558e.87eb58",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Master Toilet Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_master_toilet_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1360,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "ff9936a2.d714b8",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Master Bathroom Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_master_bathroom_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1380,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "c886bbbe.d31fd8",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Master Dressing Room Lights Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_dimmer_dressing_room"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1400,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "32edec0c.b20764",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Upstairs Lights off routine off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.off_upstairs_lights"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1380,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "e39fd5c3615e9149",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Ruby Lamp Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_dimmer_ruby_lamp"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1340,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "18f78f69ed88f852",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Alex Lamp Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.hue_bulb_1",
            "light.hue_bulb_1"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1340,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "4d7c83ce.1db30c",
        "type": "mqtt in",
        "z": "9a1b490a16d77e03",
        "name": "Sub MQTT Turn Off Upstairs All",
        "topic": "nodered-custom/lights/turn-off-upstairs-all",
        "qos": "1",
        "datatype": "auto",
        "broker": "32add66e.5cfcaa",
        "inputs": 0,
        "x": 1010,
        "y": 960,
        "wires": [
            [
                "d797339b.f8a93",
                "6ec9fba.f027804"
            ]
        ]
    },
    {
        "id": "d797339b.f8a93",
        "type": "mqtt out",
        "z": "9a1b490a16d77e03",
        "name": "Pub MQTT Turn Off Upstairs",
        "topic": "nodered-custom/lights/turn-off-upstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 1320,
        "y": 940,
        "wires": []
    },
    {
        "id": "6ec9fba.f027804",
        "type": "mqtt out",
        "z": "9a1b490a16d77e03",
        "name": "Pub MQTT Turn Off Upstairs Extra",
        "topic": "nodered-custom/lights/turn-off-upstairs-extra",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 1340,
        "y": 985,
        "wires": []
    },
    {
        "id": "b703f70d.9c01e8",
        "type": "mqtt out",
        "z": "9a1b490a16d77e03",
        "name": "Pub MQTT Turn Off Downstairs",
        "topic": "nodered-custom/lights/turn-off-downstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 1330,
        "y": 880,
        "wires": []
    },
    {
        "id": "3cf6e7fc.090e68",
        "type": "mqtt out",
        "z": "9a1b490a16d77e03",
        "name": "Pub MQTT Turn Off Upstairs ALL",
        "topic": "nodered-custom/lights/turn-off-upstairs-all",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 1340,
        "y": 840,
        "wires": []
    },
    {
        "id": "29b10945.5f0776",
        "type": "mqtt in",
        "z": "9a1b490a16d77e03",
        "name": "Sub MQTT Turn Off All",
        "topic": "nodered-custom/lights/turn-off-all",
        "qos": "1",
        "datatype": "auto",
        "broker": "32add66e.5cfcaa",
        "inputs": 0,
        "x": 1040,
        "y": 860,
        "wires": [
            [
                "3cf6e7fc.090e68",
                "b703f70d.9c01e8"
            ]
        ]
    },
    {
        "id": "fad172eb5157bd4b",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Guest Ceiling Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.guest_ceiling_fan"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1360,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "b40f8a3ad8389236",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "TV Standing Lamp Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.dimmer_smart_energy_illum_light_level"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 560,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "29407d9c4a531491",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Kitchen TV Screen Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "remote.samsung_the_frame_32"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 560,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "2b126dfd9437d65a",
        "type": "api-call-service",
        "z": "9a1b490a16d77e03",
        "name": "Standing Lamp Sitting Area Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_1"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 590,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "a155ef5b.689b2",
        "type": "mqtt in",
        "z": "3434d199.8ed28e",
        "name": "Zigbee2MQTT",
        "topic": "zigbee2mqtt/#",
        "qos": "2",
        "datatype": "utf8",
        "broker": "32add66e.5cfcaa",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 170,
        "y": 240,
        "wires": [
            [
                "6afea8f1.71fd88"
            ]
        ]
    },
    {
        "id": "6f0a76e0.adb988",
        "type": "switch",
        "z": "3434d199.8ed28e",
        "name": "Switch",
        "property": "payload.mqtt_action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "toggle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "brightness_up",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "brightness_down",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "brightness_stop",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "rotate_right",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "rotate_left",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "play_pause",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "skip_forward",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "skip_backward",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "brightness_move_up",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "brightness_move_down",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "change_brightness",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 14,
        "x": 590,
        "y": 240,
        "wires": [
            [
                "77671717.68a198"
            ],
            [
                "272b6c02.ffb5e4"
            ],
            [
                "db0369b0.e48658"
            ],
            [
                "c3204859.6dc628"
            ],
            [
                "c3204859.6dc628"
            ],
            [
                "eea65ef.9079aa"
            ],
            [
                "852dd0e6.cdbfa"
            ],
            [
                "ffa23a63.7b7048"
            ],
            [
                "4247f0d8.ed32e"
            ],
            [
                "bdb1a8ec.783d68"
            ],
            [
                "34ce4184.0f3dae"
            ],
            [
                "da259b1c.a15328"
            ],
            [
                "da259b1c.a15328"
            ],
            [
                "da259b1c.a15328"
            ]
        ]
    },
    {
        "id": "77671717.68a198",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "{{payload.data.entity_id}}"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 880,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "272b6c02.ffb5e4",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "{{payload.data.entity_id}}"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 880,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "3b1e6eaa.66a872",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Study Lamp Adjust Brightness",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "Ettienne"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1190,
        "y": 220,
        "wires": [
            [
                "79ec80a7.590fd"
            ]
        ]
    },
    {
        "id": "c3204859.6dc628",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Setup Ramping",
        "func": "switch(msg.payload.mqtt_action) {\n    case \"brightness_up\":\n        msg.payload.data.brightness_step = 25;\n        break;\n    case \"brightness_down\":\n        msg.payload.data.brightness_step = -25;\n        break;\n}\nmsg.payload.data.transition = 0.5;\nflow.set(\"keepRamping\", true);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 900,
        "y": 220,
        "wires": [
            [
                "3b1e6eaa.66a872"
            ]
        ]
    },
    {
        "id": "79ec80a7.590fd",
        "type": "switch",
        "z": "3434d199.8ed28e",
        "name": "Check Keep Ramping",
        "property": "keepRamping",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1480,
        "y": 220,
        "wires": [
            [
                "e8f21668.b98378"
            ],
            []
        ]
    },
    {
        "id": "e8f21668.b98378",
        "type": "delay",
        "z": "3434d199.8ed28e",
        "name": "",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 1690,
        "y": 220,
        "wires": [
            [
                "3b1e6eaa.66a872"
            ]
        ]
    },
    {
        "id": "6afea8f1.71fd88",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Switch Topic to Entity ID",
        "func": "if(!msg.payload) return;\n\nif(msg.payload.startsWith(\"{\")) {\n    msg.payload = JSON.parse(msg.payload);    \n    msg.payload.data = {};\n}\n\nif(msg.payload.brightness && msg.payload.action == \"brightness_stop\") {\n    msg.payload.mqtt_action = \"change_brightness\";\n    msg.payload.data.brightness = msg.payload.brightness;\n}\n\nif(msg.payload.action == \"off\" || msg.payload.action == \"on\" || msg.payload.action == \"toggle\") {\n    msg.payload.mqtt_action = msg.payload.action;\n}\n\nswitch(msg.topic) {\n    case \"zigbee2mqtt/Tradfri Button 1\":\n        msg.payload.data.entity_id = \"light.shelly_dimmer_ruby_lamp\";\n        break;\n    case \"zigbee2mqtt/Tradfri Button 2\":\n        msg.payload.data.entity_id = \"light.hue_bulb_2\";\n        break;\n    case \"zigbee2mqtt/Tradfri Button 3\":\n        msg.payload.data.entity_id = \"light.hue_bulb_1\";\n        break;\n    case \"zigbee2mqtt/Tradfri Volume Knob 1\":\n        msg.payload.data.entity_id = \"light.lifx_strip_1\";\n        break;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 240,
        "wires": [
            [
                "6f0a76e0.adb988"
            ]
        ]
    },
    {
        "id": "eea65ef.9079aa",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Stop Ramping",
        "func": "flow.set(\"keepRamping\", false);",
        "outputs": 1,
        "noerr": 0,
        "x": 900,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "2184b5c7.89f18a",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Stop Music Downstairs",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "media_player",
        "service": "media_stop",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.kitchen_speaker"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 440,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "7bc1d1ad.a5ea1",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Start Music Downstairs",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "spotcast",
        "service": "start",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.kitchen_speaker"
        ],
        "data": "{\"uri\":\"{{randomPlaylist.uri}}\",\"random_song\":true,\"force_playback\":true}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 680,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "78fc8845.fa8598",
        "type": "api-current-state",
        "z": "3434d199.8ed28e",
        "name": "Downstairs Is Playing",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "playing",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "media_player.kitchen_speaker",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 200,
        "y": 980,
        "wires": [
            [
                "2184b5c7.89f18a"
            ],
            [
                "d84ac7b7.16f4e8"
            ]
        ]
    },
    {
        "id": "d84ac7b7.16f4e8",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Choose Random Playlist",
        "func": "let playlistsArray = [\n    {\n        uri : \"spotify:playlist:37i9dQZF1E4EFyuVOygvQ7\", \n        desc : \"Air Radio\",\n    },\n    {\n        uri : \"spotify:playlist:37i9dQZF1E39OdKMfKM663\", \n        desc : \"Tame Impala, Two Door Cinema, Gang of Youths\",\n    },\n    {\n        uri : \"spotify:playlist:37i9dQZF1E35sNS8MhSVoM\", \n        desc : \"Nightmares on Wax, Zero 7 etc\",\n    },\n    \n]\n\nvar randomPlaylist = playlistsArray[Math.floor(Math.random()*playlistsArray.length)];\nmsg.randomPlaylist = randomPlaylist;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 450,
        "y": 1000,
        "wires": [
            [
                "7bc1d1ad.a5ea1"
            ]
        ]
    },
    {
        "id": "852dd0e6.cdbfa",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Volume Up",
        "func": "msg.custom.service = \"volume_up\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 890,
        "y": 300,
        "wires": [
            [
                "c0d920bf.8be99"
            ]
        ]
    },
    {
        "id": "ffa23a63.7b7048",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Volume Down",
        "func": "msg.custom.service = \"volume_down\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 900,
        "y": 340,
        "wires": [
            [
                "c0d920bf.8be99"
            ]
        ]
    },
    {
        "id": "4247f0d8.ed32e",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Play/Pause",
        "func": "msg.custom.service = \"media_play_pause\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 890,
        "y": 400,
        "wires": [
            [
                "c0d920bf.8be99"
            ]
        ]
    },
    {
        "id": "bdb1a8ec.783d68",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Skip Forward",
        "func": "msg.custom.service = \"media_next_track\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 890,
        "y": 440,
        "wires": [
            [
                "c0d920bf.8be99"
            ]
        ]
    },
    {
        "id": "34ce4184.0f3dae",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Skip Backward",
        "func": "msg.custom.service = \"media_previous_track\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 900,
        "y": 480,
        "wires": [
            [
                "c0d920bf.8be99"
            ]
        ]
    },
    {
        "id": "9eee98d.373ea68",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Call Media Player Service",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "media_player",
        "service": "{{custom.service}}",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "{{custom.entity_id}}"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1690,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "c0d920bf.8be99",
        "type": "api-current-state",
        "z": "3434d199.8ed28e",
        "name": "Downstairs Playing",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "playing",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "media_player.downstairs",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1170,
        "y": 360,
        "wires": [
            [
                "6eed1c68.95c104"
            ],
            [
                "9eee98d.373ea68"
            ]
        ]
    },
    {
        "id": "6eed1c68.95c104",
        "type": "function",
        "z": "3434d199.8ed28e",
        "name": "Switch Topic to Entity ID",
        "func": "msg.custom.entity_id = \"media_player.downstairs\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1430,
        "y": 320,
        "wires": [
            [
                "9eee98d.373ea68"
            ]
        ]
    },
    {
        "id": "e461c325.4ebbf",
        "type": "comment",
        "z": "3434d199.8ed28e",
        "name": "Target Override",
        "info": "If downstairs is playing override the target device of kitchen speaker",
        "x": 1400,
        "y": 280,
        "wires": []
    },
    {
        "id": "d3f8b026.739dc",
        "type": "mqtt in",
        "z": "3434d199.8ed28e",
        "name": "Tuya Remote 1",
        "topic": "zigbee2mqtt/Tuya Remote 1",
        "qos": "2",
        "datatype": "json",
        "broker": "32add66e.5cfcaa",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 180,
        "y": 620,
        "wires": [
            [
                "624d398.b1b5dc8",
                "c3636f65.c6256"
            ]
        ]
    },
    {
        "id": "d6ec70e0.857cd",
        "type": "mqtt in",
        "z": "3434d199.8ed28e",
        "name": "Tuya Remote 2",
        "topic": "zigbee2mqtt/Tuya Remote 2",
        "qos": "2",
        "datatype": "json",
        "broker": "32add66e.5cfcaa",
        "inputs": 0,
        "x": 180,
        "y": 800,
        "wires": [
            [
                "150ebbb8.b66324"
            ]
        ]
    },
    {
        "id": "624d398.b1b5dc8",
        "type": "switch",
        "z": "3434d199.8ed28e",
        "name": "Switch",
        "property": "payload.action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1_single",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1_double",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2_single",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2_double",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3_single",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3_double",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 6,
        "x": 590,
        "y": 620,
        "wires": [
            [
                "3dac140b.1973cc"
            ],
            [
                "fe33d356.53a4f",
                "c3636f65.c6256"
            ],
            [
                "1c9419a9.91fb66"
            ],
            [],
            [],
            [
                "27ada683.44da6a"
            ]
        ]
    },
    {
        "id": "3dac140b.1973cc",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Study Bias Toggle",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_strip_1"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 910,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "1c9419a9.91fb66",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Study Light Toggle",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_study_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1130,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "fe33d356.53a4f",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Study Bias On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_strip_1"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 900,
        "y": 620,
        "wires": [
            [
                "3840639e.677e0c"
            ]
        ]
    },
    {
        "id": "3840639e.677e0c",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Study Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_study_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1120,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "27ada683.44da6a",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Bedtime Routine On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.bedtime_routine"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1140,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "150ebbb8.b66324",
        "type": "switch",
        "z": "3434d199.8ed28e",
        "name": "Switch",
        "property": "payload.action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1_single",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1_double",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2_single",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2_double",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3_single",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3_double",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 6,
        "x": 610,
        "y": 800,
        "wires": [
            [
                "8947af2.e520b5"
            ],
            [],
            [
                "4fff6dd9.9537b4"
            ],
            [],
            [],
            [
                "b61ebbe3.350018"
            ]
        ]
    },
    {
        "id": "8947af2.e520b5",
        "type": "mqtt out",
        "z": "3434d199.8ed28e",
        "name": "Pub MQTT Turn Off Upstairs All",
        "topic": "nodered-custom/lights/turn-off-upstairs-all",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 930,
        "y": 760,
        "wires": []
    },
    {
        "id": "4fff6dd9.9537b4",
        "type": "mqtt out",
        "z": "3434d199.8ed28e",
        "name": "Pub MQTT Turn Off Downstairs",
        "topic": "nodered-custom/lights/turn-off-downstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 930,
        "y": 800,
        "wires": []
    },
    {
        "id": "b61ebbe3.350018",
        "type": "mqtt out",
        "z": "3434d199.8ed28e",
        "name": "Pub MQTT Turn Off All",
        "topic": "nodered-custom/lights/turn-off-all",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 900,
        "y": 840,
        "wires": []
    },
    {
        "id": "c3636f65.c6256",
        "type": "debug",
        "z": "3434d199.8ed28e",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1230,
        "y": 740,
        "wires": []
    },
    {
        "id": "da259b1c.a15328",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Adjust Lamp Brightness",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "{{payload.data.entity_id}}"
        ],
        "data": "{\"brightness\":\"{{payload.data.brightness}}\",\"transition\":0.2}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 930,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "db0369b0.e48658",
        "type": "api-call-service",
        "z": "3434d199.8ed28e",
        "name": "Light Toggle",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "{{payload.data.entity_id}}"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 890,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "d8d24cdb.afcbb",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Bedtime Routine On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.bedtime_routine",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 150,
        "y": 320,
        "wires": [
            [
                "8dafb27f.9a5ad",
                "e617d4c1.43a658"
            ],
            []
        ]
    },
    {
        "id": "189d208.b2775e",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Delay for 7 seconds",
        "func": "setTimeout(function(){\n    node.status({fill:\"red\", shape:\"ring\", text:\" \"});\n    msg['payload'] = 'finished';\n    node.send(msg);\n}, 7000);\nnode.status({fill:\"blue\", shape:\"ring\", text:' '});",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 400,
        "wires": [
            [
                "93336d4d.51ae"
            ]
        ]
    },
    {
        "id": "8dafb27f.9a5ad",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Foyer Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.dimmer_foyer_light_level"
        ],
        "data": "{\"brightness\":255}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 400,
        "y": 320,
        "wires": [
            [
                "be1f3d34.c33ea"
            ]
        ]
    },
    {
        "id": "be1f3d34.c33ea",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Stairs Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_stairs_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 640,
        "y": 320,
        "wires": [
            [
                "bb2d5d27.d3def"
            ]
        ]
    },
    {
        "id": "93336d4d.51ae",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Study Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_strip_1"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 640,
        "y": 400,
        "wires": [
            [
                "20b6d11f.65169e"
            ]
        ]
    },
    {
        "id": "bb2d5d27.d3def",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Discreet Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.discreet_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 870,
        "y": 320,
        "wires": [
            [
                "490d7d63.a018a4"
            ]
        ]
    },
    {
        "id": "20b6d11f.65169e",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Delay for 30 seconds",
        "func": "setTimeout(function(){\n    node.status({fill:\"red\", shape:\"ring\", text:\" \"});\n    msg['payload'] = 'finished';\n    node.send(msg);\n}, 30000);\nnode.status({fill:\"blue\", shape:\"ring\", text:' '});",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 880,
        "y": 400,
        "wires": [
            [
                "e4bdb125.3177b"
            ]
        ]
    },
    {
        "id": "490d7d63.a018a4",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Rumpus Light Dim",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_rumpus_standing"
        ],
        "data": "{\"brightness\":39}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 150,
        "y": 400,
        "wires": [
            [
                "189d208.b2775e"
            ]
        ]
    },
    {
        "id": "e4bdb125.3177b",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Foyer Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.dimmer_foyer_light_level"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 140,
        "y": 460,
        "wires": [
            [
                "2a15af20.7e3b1"
            ]
        ]
    },
    {
        "id": "2a15af20.7e3b1",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Delay for 7 min",
        "func": "setTimeout(function(){\n    node.status({fill:\"red\", shape:\"ring\", text:\" \"});\n    msg['payload'] = 'finished';\n    node.send(msg);\n}, 420000);\nnode.status({fill:\"blue\", shape:\"ring\", text:' '});",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 460,
        "wires": [
            [
                "4121cd0e.eea244"
            ]
        ]
    },
    {
        "id": "4121cd0e.eea244",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Discreet Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.discreet_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 650,
        "y": 460,
        "wires": [
            [
                "fb2454a3.a9a9f8",
                "ab093810.0a8fd8",
                "27aa3de3.f57a62",
                "a46313fef0b88b45",
                "ce7481af82af6634"
            ]
        ]
    },
    {
        "id": "fb2454a3.a9a9f8",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Bedtime routine off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.bedtime_routine"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 950,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "f7c9e5df.0d8d38",
        "type": "inject",
        "z": "823d3fb7.65d29",
        "name": "7PM Bedtime",
        "repeat": "",
        "crontab": "00 19 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 100,
        "wires": [
            [
                "bc582b00.03f548"
            ]
        ]
    },
    {
        "id": "bc582b00.03f548",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "TTS Announce",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "tts",
        "service": "google_translate_say",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.living_area"
        ],
        "data": "{\"message\":\"Its bedtime for the babies, lets go to bed\"}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 440,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "fa01e8b.3d37a18",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Lounge Music Routine On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.lounge_music",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 1040,
        "wires": [
            [],
            [
                "193b6411.343e6c"
            ]
        ]
    },
    {
        "id": "193b6411.343e6c",
        "type": "template",
        "z": "823d3fb7.65d29",
        "name": "BD/DVD Input",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgBgAAABJZQSEhI4EhMSEhI4EhISOBI3EhMSExI3EjcSExI4EjcSExISEhMSNxI4EhMSEhITEjcSOBI3EhMSExI3EjcSOBITEgAFGQABJUoTAAxDAAElSxIADEMAASpGEgANBQAAAAAAAAAA",
        "output": "str",
        "x": 540,
        "y": 1049,
        "wires": [
            []
        ]
    },
    {
        "id": "e246310c.85587",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Downstairs Speaker Group Playing",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "media_player.downstairs",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "playing",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 200,
        "y": 880,
        "wires": [
            [],
            [
                "33d5b269.74328e"
            ]
        ]
    },
    {
        "id": "7ec8eea6.58062",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "TTS Announce",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "tts",
        "service": "google_translate_say",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "{{target}}"
        ],
        "data": "{\"message\":\"{{announce}}\"}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1000,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "e00dc012.6a07d",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Calc Day of Year",
        "func": "var now = new Date();\nvar start = new Date(now.getFullYear(), 0, 0);\nvar diff = now - start;\nvar oneDay = 1000 * 60 * 60 * 24;\nvar dayofYear = Math.floor(diff / oneDay);\nvar accouncementCommon = \"Dont forget to put out the bins, \"\n\nif(dayofYear % 2 === 0) {\n    msg.announce = accouncementCommon + \"its Red bin day today, take out the general waste\";\n}\nelse {\n    msg.announce = accouncementCommon + \"its Yellow bin day today, take out the recycling\";\n    \n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 200,
        "wires": [
            [
                "7ec8eea6.58062"
            ]
        ]
    },
    {
        "id": "68843875.77f2a8",
        "type": "inject",
        "z": "823d3fb7.65d29",
        "name": "Manual Test",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 180,
        "wires": [
            [
                "34825c1d.721ca4"
            ]
        ]
    },
    {
        "id": "8382d4ea.df9258",
        "type": "template",
        "z": "823d3fb7.65d29",
        "name": "Target All Speakers",
        "field": "target",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "media_player.living_area",
        "output": "str",
        "x": 490,
        "y": 220,
        "wires": [
            [
                "e00dc012.6a07d"
            ]
        ]
    },
    {
        "id": "34825c1d.721ca4",
        "type": "template",
        "z": "823d3fb7.65d29",
        "name": "Target Kitchen Speaker",
        "field": "target",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "media_player.living_area",
        "output": "str",
        "x": 510,
        "y": 180,
        "wires": [
            [
                "e00dc012.6a07d"
            ]
        ]
    },
    {
        "id": "33d5b269.74328e",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Delay for 30 seconds",
        "func": "setTimeout(function(){\n    node.status({fill:\"red\", shape:\"ring\", text:\" \"});\n    msg['payload'] = 'finished';\n    node.send(msg);\n}, 30000);\nnode.status({fill:\"blue\", shape:\"ring\", text:' '});",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 1000,
        "wires": [
            [
                "f4302aa0.a75cd8"
            ]
        ]
    },
    {
        "id": "f4302aa0.a75cd8",
        "type": "api-current-state",
        "z": "823d3fb7.65d29",
        "name": "Check is Media Player is still off",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "media_player.downstairs",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 830,
        "y": 1000,
        "wires": [
            [
                "193b6411.343e6c"
            ],
            []
        ]
    },
    {
        "id": "58705ad5.2c3b34",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Change Speaker Volume",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "media_player",
        "service": "volume_set",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.everywhere"
        ],
        "data": "{\"volume_level\":0.4}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 430,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "aba39d3e.467e6",
        "type": "inject",
        "z": "823d3fb7.65d29",
        "name": "Manual Test",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 40,
        "wires": [
            [
                "58705ad5.2c3b34"
            ]
        ]
    },
    {
        "id": "39d9c39f.893ffc",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "AMP TV Source On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "switch.amp_tv",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 150,
        "y": 600,
        "wires": [
            [
                "42bc43e0.39980c"
            ],
            [
                "5c7ae04d.83d94"
            ]
        ]
    },
    {
        "id": "42bc43e0.39980c",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "AMP Music Source Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.amp_music"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 440,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "951c7c8.d80b38",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "AMP TV Source Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.amp_tv"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 430,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "b320a94f.e30288",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "AMP Music Source On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "switch.amp_music",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 680,
        "wires": [
            [
                "951c7c8.d80b38"
            ],
            [
                "c0cadf02.29ec2"
            ]
        ]
    },
    {
        "id": "5c7ae04d.83d94",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "AMP Music Source On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.amp_music"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 440,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "c0cadf02.29ec2",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "AMP TV Source On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.amp_tv"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 430,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "37ca2198.42581e",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Kitchen Light Turn On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "light.shelly_1_kitchen_light",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 1200,
        "wires": [
            [
                "48ae38b9.be3558"
            ],
            []
        ]
    },
    {
        "id": "48ae38b9.be3558",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Between 6am and 8am",
        "func": "var d = new Date();\nvar hour = d.getHours();\nmsg.continue = false;\n\nif(hour >= 6 && hour <= 8) {\n    msg.continue = true;\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 490,
        "y": 1200,
        "wires": [
            [
                "c0d87ff7.1651a"
            ]
        ]
    },
    {
        "id": "c0d87ff7.1651a",
        "type": "switch",
        "z": "823d3fb7.65d29",
        "name": "Time Window Test",
        "property": "continue",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 770,
        "y": 1200,
        "wires": [
            [
                "501641d2.3c769"
            ],
            []
        ]
    },
    {
        "id": "501641d2.3c769",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Turn on Coffee Machine",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_strip1_1"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1050,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "f6258fa3.221f",
        "type": "inject",
        "z": "823d3fb7.65d29",
        "name": "Bin Reminder Every Wed",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "50 18 * * 3",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 220,
        "wires": [
            [
                "8382d4ea.df9258"
            ]
        ]
    },
    {
        "id": "1b5a8da8.0c0562",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Lounge TV Time Routine On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.lounge_tv_time",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 1300,
        "wires": [
            [
                "ee38a39d.c6126"
            ],
            []
        ]
    },
    {
        "id": "a969f804.c79ad8",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Lounge TV Time Routine Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.lounge_tv_time"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1300,
        "y": 1300,
        "wires": [
            [
                "29b41ec2.233962"
            ]
        ]
    },
    {
        "id": "ee38a39d.c6126",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Set Routine Running Global",
        "func": "flow.set(\"tv_time_routine_running\", true);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 490,
        "y": 1300,
        "wires": [
            [
                "da196831.9bc778"
            ]
        ]
    },
    {
        "id": "82bdf713.501298",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Lounge Dimmer Nano On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "light.aeon_labs_zw111_nano_dimmer_level",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 170,
        "y": 1380,
        "wires": [
            [
                "5529ce2.f07b03"
            ],
            [
                "5529ce2.f07b03"
            ]
        ]
    },
    {
        "id": "d012898c.f0ca08",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Toggle Service",
        "func": "msg.service = msg.payload == \"on\" ? \"turn_on\" : \"turn_off\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 760,
        "y": 1380,
        "wires": [
            [
                "574b1f51.b8691"
            ]
        ]
    },
    {
        "id": "58c85c38.d30fe4",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Sony TV Toggle",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "media_player",
        "service": "{{service}}",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.sony_bravia_tv"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1020,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "5529ce2.f07b03",
        "type": "switch",
        "z": "823d3fb7.65d29",
        "name": "Check TV Time Routine Global",
        "property": "tv_time_routine_running",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 490,
        "y": 1380,
        "wires": [
            [],
            [
                "d012898c.f0ca08"
            ]
        ]
    },
    {
        "id": "da196831.9bc778",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Loung Nano Dimmer Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.aeon_labs_zw111_nano_dimmer_level"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 790,
        "y": 1300,
        "wires": [
            [
                "c983049.bac5bf8"
            ]
        ]
    },
    {
        "id": "c983049.bac5bf8",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Alex Kitchen Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_alex_kitchen_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1040,
        "y": 1300,
        "wires": [
            [
                "a969f804.c79ad8"
            ]
        ]
    },
    {
        "id": "4e8257c5.49a228",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Set Routine Running Global",
        "func": "flow.set(\"tv_time_routine_running\", false);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1760,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "29b41ec2.233962",
        "type": "delay",
        "z": "823d3fb7.65d29",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 1540,
        "y": 1300,
        "wires": [
            [
                "4e8257c5.49a228"
            ]
        ]
    },
    {
        "id": "6d97ee91.b1d6a",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Sony TV On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "media_player.sony_bravia_tv",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 130,
        "y": 1460,
        "wires": [
            [
                "a6a21e9a.085ba"
            ],
            [
                "a6a21e9a.085ba"
            ]
        ]
    },
    {
        "id": "a6a21e9a.085ba",
        "type": "function",
        "z": "823d3fb7.65d29",
        "name": "Toggle Service",
        "func": "msg.service = msg.payload == \"playing\" ? \"turn_on\" : \"turn_off\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 1460,
        "wires": [
            []
        ]
    },
    {
        "id": "574b1f51.b8691",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Standing Lamp Toggle",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "{{service}}",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.dimmer_smart_energy_illum_light_level"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1040,
        "y": 1460,
        "wires": [
            []
        ]
    },
    {
        "id": "ab093810.0a8fd8",
        "type": "mqtt out",
        "z": "823d3fb7.65d29",
        "name": "Pub MQTT Turn Off Downstairs",
        "topic": "nodered-custom/lights/turn-off-downstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 990,
        "y": 500,
        "wires": []
    },
    {
        "id": "27aa3de3.f57a62",
        "type": "mqtt out",
        "z": "823d3fb7.65d29",
        "name": "Pub MQTT Turn Off Upstairs",
        "topic": "nodered-custom/lights/turn-off-upstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 980,
        "y": 540,
        "wires": []
    },
    {
        "id": "795777ec.6f1138",
        "type": "mqtt out",
        "z": "823d3fb7.65d29",
        "name": "Pub MQTT Turn Off Downstairs",
        "topic": "nodered-custom/lights/turn-off-downstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 990,
        "y": 800,
        "wires": []
    },
    {
        "id": "e617d4c1.43a658",
        "type": "mqtt out",
        "z": "823d3fb7.65d29",
        "name": "Pub MQTT Turn Off Downstairs",
        "topic": "nodered-custom/lights/turn-off-downstairs",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 450,
        "y": 280,
        "wires": []
    },
    {
        "id": "4e20018d.57cfa",
        "type": "server-events",
        "z": "823d3fb7.65d29",
        "name": "",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "exposeAsEntityConfig": "",
        "eventType": "tag_scanned",
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            },
            {
                "property": "event_type",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            }
        ],
        "x": 190,
        "y": 1680,
        "wires": [
            [
                "9a5a396.b39e5c8"
            ]
        ]
    },
    {
        "id": "9a5a396.b39e5c8",
        "type": "switch",
        "z": "823d3fb7.65d29",
        "name": "Switch",
        "property": "payload.event.tag_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "de64cce7-4d62-4b44-96a7-7deeb99781ab",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "aa09d9b6-39ed-4e52-add6-8c015b94161f",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "c6d96b95-fb72-4ab9-b53e-4dd7691ce40d",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 390,
        "y": 1640,
        "wires": [
            [
                "1b337990.ec2a26"
            ],
            [
                "53b16d8c.950284"
            ],
            [
                "730bbb51.4a2b84"
            ]
        ]
    },
    {
        "id": "9bc0add9.589ee",
        "type": "mqtt in",
        "z": "823d3fb7.65d29",
        "name": "Sub MQTT Bedtime",
        "topic": "nodered-custom/routines/bedtime",
        "qos": "1",
        "datatype": "auto",
        "broker": "32add66e.5cfcaa",
        "inputs": 0,
        "x": 190,
        "y": 2000,
        "wires": [
            [
                "cff556fe.193ef8",
                "cfbacd37.4e7da",
                "a1a8e411.d71628",
                "7132f2f2.d47a0c",
                "572a8ecc.43619",
                "1a2edba1.735454",
                "44ee5f05.13f9d",
                "ac8df0c1.49522"
            ]
        ]
    },
    {
        "id": "cff556fe.193ef8",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Alex Room Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.alex_ceiling_fan"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 480,
        "y": 1860,
        "wires": [
            []
        ]
    },
    {
        "id": "cfbacd37.4e7da",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Ruby Room Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.ruby_ceiling_fan"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 480,
        "y": 1900,
        "wires": [
            []
        ]
    },
    {
        "id": "a1a8e411.d71628",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Alex Lamp On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.hue_bulb_1",
            "light.hue_bulb_1"
        ],
        "data": "{\"brightness_pct\":\"80\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 460,
        "y": 1940,
        "wires": [
            []
        ]
    },
    {
        "id": "7132f2f2.d47a0c",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Ruby Lamp On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_dimmer_ruby_lamp"
        ],
        "data": "{\"brightness_pct\":\"80\"}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 460,
        "y": 1980,
        "wires": [
            []
        ]
    },
    {
        "id": "572a8ecc.43619",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Kids Bathroom Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_kids_bathroom_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 490,
        "y": 2020,
        "wires": [
            []
        ]
    },
    {
        "id": "1a2edba1.735454",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Kids Toilet Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.aeon_labs_dsc19103_micro_smart_dimmer_2nd_edition_level_3"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 470,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "44ee5f05.13f9d",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Rumpus Main Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_rumpus_main_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 480,
        "y": 2100,
        "wires": [
            []
        ]
    },
    {
        "id": "ac8df0c1.49522",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Rumpus Side Light Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_2_5_rumpus_side_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 480,
        "y": 2140,
        "wires": [
            []
        ]
    },
    {
        "id": "1b337990.ec2a26",
        "type": "mqtt out",
        "z": "823d3fb7.65d29",
        "name": "Pub MQTT Bedtime",
        "topic": "nodered-custom/routines/bedtime",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 710,
        "y": 1580,
        "wires": []
    },
    {
        "id": "53b16d8c.950284",
        "type": "mqtt out",
        "z": "823d3fb7.65d29",
        "name": "Pub MQTT Leave Home",
        "topic": "nodered-custom/routines/leave-home",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "32add66e.5cfcaa",
        "x": 730,
        "y": 1620,
        "wires": []
    },
    {
        "id": "f5d4772a.8ff708",
        "type": "mqtt in",
        "z": "823d3fb7.65d29",
        "name": "Sub MQTT Leave Home",
        "topic": "nodered-custom/routines/leave-home",
        "qos": "1",
        "datatype": "auto",
        "broker": "32add66e.5cfcaa",
        "inputs": 0,
        "x": 210,
        "y": 2260,
        "wires": [
            [
                "6dbdca5b.220734"
            ]
        ]
    },
    {
        "id": "6dbdca5b.220734",
        "type": "mqtt out",
        "z": "823d3fb7.65d29",
        "name": "Pub MQTT Turn Off All",
        "topic": "nodered-custom/lights/turn-off-all",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "32add66e.5cfcaa",
        "x": 480,
        "y": 2260,
        "wires": []
    },
    {
        "id": "83fe54c0.218af8",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Bedtime Routine On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "input_boolean",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.bedtime_routine"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 480,
        "y": 2320,
        "wires": [
            []
        ]
    },
    {
        "id": "730bbb51.4a2b84",
        "type": "mqtt out",
        "z": "823d3fb7.65d29",
        "name": "Pub MQTT Leave Home",
        "topic": "nodered-custom/routines/ett-bedtime",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 730,
        "y": 1660,
        "wires": []
    },
    {
        "id": "7baaf498.bc473c",
        "type": "mqtt in",
        "z": "823d3fb7.65d29",
        "name": "Sub MQTT Ett Bedtime",
        "topic": "nodered-custom/routines/ett-bedtime",
        "qos": "1",
        "datatype": "auto",
        "broker": "32add66e.5cfcaa",
        "inputs": 0,
        "x": 200,
        "y": 2320,
        "wires": [
            [
                "83fe54c0.218af8"
            ]
        ]
    },
    {
        "id": "3c5ece96.998ea2",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "TTS Announce",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "",
        "service": "",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.living_area"
        ],
        "data": "{\"message\":\"Its bedtime for the babies, lets go to bed\"}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1380,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "6ca4335ce06cb14a",
        "type": "comment",
        "z": "823d3fb7.65d29",
        "name": "Pretend someone is home routine",
        "info": "",
        "x": 230,
        "y": 2440,
        "wires": []
    },
    {
        "id": "f2cba79f1cbff6a2",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Sun goes down",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "sun.sun",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "below_horizon",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 2520,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "6480377afcecc524",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Alex Kitchen Light On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_alex_kitchen_light"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 460,
        "y": 2480,
        "wires": [
            []
        ]
    },
    {
        "id": "a8e475e9484ca775",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Laundry Lights On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.shelly_1_laundry"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 450,
        "y": 2520,
        "wires": [
            []
        ]
    },
    {
        "id": "11728ec8c150bdc0",
        "type": "inject",
        "z": "823d3fb7.65d29",
        "name": "Auto lights off pretend bedtime",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "55 21 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 2600,
        "wires": [
            []
        ]
    },
    {
        "id": "1f73587bc9c385e5",
        "type": "mqtt out",
        "z": "823d3fb7.65d29",
        "name": "Pub MQTT Turn Off All",
        "topic": "nodered-custom/lights/turn-off-all",
        "qos": "",
        "retain": "",
        "broker": "32add66e.5cfcaa",
        "x": 520,
        "y": 2600,
        "wires": []
    },
    {
        "id": "a46313fef0b88b45",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "HVAC US Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.hvac_upstairs"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 940,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "ce7481af82af6634",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "HVAC DS OFF",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "input_boolean",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "input_boolean.hvac_downstairs"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 940,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "eb4a143eea1796d6",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Ruby Room Switch Toggle",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.ruby_room_switch",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 210,
        "y": 2920,
        "wires": [
            [
                "21da7a299aa326fa"
            ],
            [
                "21da7a299aa326fa"
            ]
        ]
    },
    {
        "id": "89acb7eee365371d",
        "type": "comment",
        "z": "823d3fb7.65d29",
        "name": "Prevent Smart Fans from turning off",
        "info": "",
        "x": 240,
        "y": 2720,
        "wires": []
    },
    {
        "id": "46ccfce593f06e4e",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Guest Room Switch Toggle",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.guest_room_switch",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "0",
        "ifStateType": "num",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 210,
        "y": 3100,
        "wires": [
            [
                "76b42955e8773d76"
            ],
            [
                "76b42955e8773d76"
            ]
        ]
    },
    {
        "id": "9360ba4f2edfe9e7",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Toggle Ruby Fan Light",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.ruby_ceiling_fan"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 780,
        "y": 2900,
        "wires": [
            []
        ]
    },
    {
        "id": "120bca29046fab7a",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Toggle Guest Fan Light",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.guest_ceiling_fan"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 790,
        "y": 3080,
        "wires": [
            []
        ]
    },
    {
        "id": "0b6f165f9845898b",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Alex Room Switch Toggle",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.alex_room_switch",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 210,
        "y": 3000,
        "wires": [
            [
                "9ad4e1b1d63b1371"
            ],
            [
                "9ad4e1b1d63b1371"
            ]
        ]
    },
    {
        "id": "2a647380b12d9da6",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Toggle Alex Fan Light",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "toggle",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.alex_ceiling_fan"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 780,
        "y": 2980,
        "wires": [
            []
        ]
    },
    {
        "id": "9cef9df.b752f6",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Turn on Grinder",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_strip1_2"
        ],
        "data": " {}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 480,
        "y": 3180,
        "wires": [
            [
                "70c57b42c3828272"
            ]
        ]
    },
    {
        "id": "d0b2aad63f993060",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "Coffee Machine Power Toggle",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "switch.tp_link_strip1_1",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 220,
        "y": 3200,
        "wires": [
            [
                "9cef9df.b752f6"
            ],
            [
                "3358c1a15d77ee05"
            ]
        ]
    },
    {
        "id": "3358c1a15d77ee05",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Turn off Grinder",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_strip1_2"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 480,
        "y": 3220,
        "wires": [
            [
                "627c987cb78e68b1"
            ]
        ]
    },
    {
        "id": "ddbcc13a35b87c61",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Turn on Alex Room Power",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.alex_room_power"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 790,
        "y": 3020,
        "wires": [
            []
        ]
    },
    {
        "id": "9ad4e1b1d63b1371",
        "type": "api-current-state",
        "z": "823d3fb7.65d29",
        "name": "Is Alex Room Power On",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "switch.alex_room_power",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 510,
        "y": 3000,
        "wires": [
            [
                "2a647380b12d9da6"
            ],
            [
                "ddbcc13a35b87c61"
            ]
        ]
    },
    {
        "id": "21da7a299aa326fa",
        "type": "api-current-state",
        "z": "823d3fb7.65d29",
        "name": "Is Ruby Room Power On",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "switch.ruby_room_power",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 510,
        "y": 2920,
        "wires": [
            [
                "9360ba4f2edfe9e7"
            ],
            [
                "b4cbe40bf6c1c4fa"
            ]
        ]
    },
    {
        "id": "b4cbe40bf6c1c4fa",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Turn on Ruby Room Power",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.ruby_room_power"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 800,
        "y": 2940,
        "wires": [
            []
        ]
    },
    {
        "id": "76b42955e8773d76",
        "type": "api-current-state",
        "z": "823d3fb7.65d29",
        "name": "Is Guest Room Power On",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "switch.guest_room_power",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 510,
        "y": 3100,
        "wires": [
            [
                "120bca29046fab7a"
            ],
            [
                "a2492c52effa42ec"
            ]
        ]
    },
    {
        "id": "a2492c52effa42ec",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Turn on Guest Room Power",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.guest_room_power"
        ],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "x": 800,
        "y": 3120,
        "wires": [
            []
        ]
    },
    {
        "id": "70c57b42c3828272",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Turn on Light",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_strip1_3"
        ],
        "data": "{}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 690,
        "y": 3180,
        "wires": [
            []
        ]
    },
    {
        "id": "627c987cb78e68b1",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Turn off Light",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "switch",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.tp_link_strip1_3"
        ],
        "data": "{}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 690,
        "y": 3220,
        "wires": [
            []
        ]
    },
    {
        "id": "00fb3a946855d28d",
        "type": "server-state-changed",
        "z": "823d3fb7.65d29",
        "name": "PC is powered on",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "sensor.aeotec_plug_3_electric_consumption_w",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "50",
        "ifStateType": "num",
        "ifStateOperator": "gt",
        "outputOnlyOnStateChange": true,
        "for": "6",
        "forType": "num",
        "forUnits": "seconds",
        "ignorePrevStateNull": true,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 1070,
        "y": 1620,
        "wires": [
            [
                "59cf823bacb91d2f"
            ],
            [
                "81b9826402038749"
            ]
        ]
    },
    {
        "id": "59cf823bacb91d2f",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Study Bias On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_on",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_strip_1"
        ],
        "data": "{}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1320,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "81b9826402038749",
        "type": "api-call-service",
        "z": "823d3fb7.65d29",
        "name": "Study Bias Off",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "light",
        "service": "turn_off",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lifx_strip_1"
        ],
        "data": "{}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 1320,
        "y": 1660,
        "wires": [
            []
        ]
    },
    {
        "id": "6f04e404.0c9aec",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Front Door Open",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.gs_wds_07_door_sensor_01_4",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 480,
        "y": 240,
        "wires": [
            [
                "ba76e3fe.9494d"
            ],
            []
        ]
    },
    {
        "id": "413fdd81.edfdb4",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Laundry Sliding Door Open",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.gs_wds_07_door_sensor_03_4",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 510,
        "y": 300,
        "wires": [
            [
                "d6c12f4b.97163"
            ],
            []
        ]
    },
    {
        "id": "cb10c5f.a40c238",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Kitchen Sliding Door Open",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.gs_wds_07_door_sensor_02_4",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 500,
        "y": 360,
        "wires": [
            [
                "72c437d5.c365d8"
            ],
            []
        ]
    },
    {
        "id": "7fbaf3fb.fa0dbc",
        "type": "api-call-service",
        "z": "ff5661ef.cd5bf",
        "name": "Ettienne Push Notification",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "mobile_app_pixel_6",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\t   \"message\":\"{{source}}\",\t   \"title\":\"Alarm triggered\"\t}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1670,
        "y": 540,
        "wires": [
            [
                "c3a829570b6bb3cd"
            ]
        ]
    },
    {
        "id": "324988cc.ee6e68",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Picture Frame Movement Detected",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.multisensor_dining_motion",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 540,
        "y": 420,
        "wires": [
            [
                "a31ce7ca.b3d478"
            ],
            []
        ]
    },
    {
        "id": "b18d8c07.9e61f",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Laundry Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.door_window_sensor_laundry_open",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 510,
        "y": 480,
        "wires": [
            [
                "724a7a4a.e84d94"
            ],
            []
        ]
    },
    {
        "id": "45fa67b5.8f6218",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Pantry Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.door_window_sensor_pantry_open",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 510,
        "y": 540,
        "wires": [
            [
                "6705fa0a.a50b84"
            ],
            []
        ]
    },
    {
        "id": "a09f9081.ec2b9",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Garage Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.door_window_sensor_garage_open",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 510,
        "y": 600,
        "wires": [
            [
                "43e6690.1d70398"
            ],
            []
        ]
    },
    {
        "id": "94bab123.78c8b",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Garage Panel Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.door_window_sensor_garagepaneldoor_open",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 530,
        "y": 660,
        "wires": [
            [
                "17852f0e.fff491"
            ],
            []
        ]
    },
    {
        "id": "58e3acda.344ae4",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Stairs Closet Door Open/Close",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.door_window_sensor_stairs_closet_open",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 530,
        "y": 720,
        "wires": [
            [
                "d976fe61.62e4"
            ],
            []
        ]
    },
    {
        "id": "3b82aae3.8fe1f6",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Stairs Landing Motion Detected Sonoff PIR",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.tradfri_pir_2",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 560,
        "y": 900,
        "wires": [
            [
                "6e6ea.209b8916c"
            ],
            []
        ]
    },
    {
        "id": "48bb84e7.db89dc",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Rumpus Motion Detected Z-Wave",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.multisensor_kitchen_motion",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 530,
        "y": 840,
        "wires": [
            [
                "15dd6cd.e55f893"
            ],
            []
        ]
    },
    {
        "id": "2fd880fd.a32c1",
        "type": "api-current-state",
        "z": "ff5661ef.cd5bf",
        "name": "Home occupied",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_occupied",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1320,
        "y": 540,
        "wires": [
            [],
            [
                "7fbaf3fb.fa0dbc"
            ]
        ]
    },
    {
        "id": "ba76e3fe.9494d",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "front door opened",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "front door got opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 240,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "6e6ea.209b8916c",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "stairs landing motion",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "stairs landing motion triggered",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 900,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "15dd6cd.e55f893",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "rumpus motion zwave",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "rumpus zwave motion triggered",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 840,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "d976fe61.62e4",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "stairs closet",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "stairs closet opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 700,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "17852f0e.fff491",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "garage panel",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "garage panel door opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 660,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "43e6690.1d70398",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "garage house door",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "garage house door opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 600,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "6705fa0a.a50b84",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "pantry door",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "pantry door opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 540,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "724a7a4a.e84d94",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "laundry door",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "laundry door opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 480,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "a31ce7ca.b3d478",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "picture frame motion",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "picture frame motion triggered",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 420,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "72c437d5.c365d8",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "patio sliding door",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "patio sliding door opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 360,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "d6c12f4b.97163",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "laundry sliding door",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "laundry sliding door opened",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 890,
        "y": 300,
        "wires": [
            [
                "2fd880fd.a32c1"
            ]
        ]
    },
    {
        "id": "d810bfb6.99ca1",
        "type": "api-call-service",
        "z": "ff5661ef.cd5bf",
        "name": "Beep TTS",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "media_player",
        "service": "play_media",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.living_area"
        ],
        "data": "{\"media_content_id\":\"https://www.myinstants.com/media/sounds/short-beep.mp3\",\"media_content_type\":\"music\"}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 1080,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "9fbb8fa3.71c6a",
        "type": "inject",
        "z": "ff5661ef.cd5bf",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 580,
        "y": 1040,
        "wires": [
            [
                "095844bcc33e77d7"
            ]
        ]
    },
    {
        "id": "a790c303.aa286",
        "type": "server-state-changed",
        "z": "ff5661ef.cd5bf",
        "name": "Driveway Sensor Movement",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entityId": "binary_sensor.driveway_sensor_motion",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 520,
        "y": 1100,
        "wires": [
            [
                "095844bcc33e77d7"
            ],
            []
        ]
    },
    {
        "id": "095844bcc33e77d7",
        "type": "api-current-state",
        "z": "ff5661ef.cd5bf",
        "name": "Kitchen Light On",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.shelly_1_kitchen_light",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 850,
        "y": 1100,
        "wires": [
            [
                "d810bfb6.99ca1"
            ],
            []
        ]
    },
    {
        "id": "2cc4491ffb272286",
        "type": "change",
        "z": "ff5661ef.cd5bf",
        "name": "stairs landing motion",
        "rules": [
            {
                "t": "set",
                "p": "source",
                "pt": "msg",
                "to": "test alarm",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1360,
        "y": 660,
        "wires": [
            [
                "7fbaf3fb.fa0dbc",
                "c3a829570b6bb3cd"
            ]
        ]
    },
    {
        "id": "28e096cfc6ddcab3",
        "type": "inject",
        "z": "ff5661ef.cd5bf",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1200,
        "y": 800,
        "wires": [
            [
                "2cc4491ffb272286"
            ]
        ]
    },
    {
        "id": "c3a829570b6bb3cd",
        "type": "debug",
        "z": "ff5661ef.cd5bf",
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1620,
        "y": 640,
        "wires": []
    },
    {
        "id": "4a46042a.b04d2c",
        "type": "http in",
        "z": "6e7a064f.40b368",
        "name": "Shinobi Incoming Motion Trigger GET",
        "url": "/camera/:monitor_id/:group_key/trigger",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 170,
        "y": 140,
        "wires": [
            [
                "139f41ee.abf39e",
                "336d7d4d.ec0b42"
            ]
        ]
    },
    {
        "id": "d2e89fd1.06891",
        "type": "debug",
        "z": "6e7a064f.40b368",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1110,
        "y": 180,
        "wires": []
    },
    {
        "id": "139f41ee.abf39e",
        "type": "http response",
        "z": "6e7a064f.40b368",
        "name": "HTTP 200 Response",
        "statusCode": "200",
        "headers": {
            "action": "node-red-flow-invoked"
        },
        "x": 480,
        "y": 120,
        "wires": []
    },
    {
        "id": "4629c415.9b478c",
        "type": "template",
        "z": "6e7a064f.40b368",
        "name": "Transform Output",
        "field": "action_details",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\n    \"monitor_id\": \"{{req.params.monitor_id}}\",\n    \"group_key\": \"{{req.params.group_key}}\",\n    \"confidence\": \"{{payload.confidence}}\", \n    \"shinobi_host\": \"{{{global.shinobiHost}}}\",\n    \"shinobi_url\": \"{{{global.shinobiHost}}}/jpeg/{{req.params.group_key}}/{{req.params.monitor_id}}/s.jpg?timestamp={{_msgid}}\",\n    \"filename\": \"/data/camera-images/{{_msgid}}.jpg\", \n    \"hass_filename\": \"/config/www/camera-images/{{_msgid}}.jpg\",\n    \"target\": \"624934647675224084\"\n    \n}",
        "output": "json",
        "x": 670,
        "y": 180,
        "wires": [
            [
                "b7e28a5d.d74a48"
            ]
        ]
    },
    {
        "id": "4ea0a155.4acad",
        "type": "api-call-service",
        "z": "6e7a064f.40b368",
        "name": "Ettienne Push Notification",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "debugenabled": false,
        "domain": "notify",
        "service": "discord_notifications",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "{\"message\":\"Camera motion detected {{_msgid}} - {{action_details.monitor_id}}\",\"data\":{\"images\":[\"{{{action_details.hass_filename}}}\"]},\"target\":[\"{{action_details.target}}\"]}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 910,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "b7e28a5d.d74a48",
        "type": "http request",
        "z": "6e7a064f.40b368",
        "name": "Request Camera JPG",
        "method": "GET",
        "ret": "bin",
        "paytoqs": false,
        "url": "{{{action_details.shinobi_url}}}",
        "tls": "",
        "proxy": "",
        "authType": "",
        "x": 900,
        "y": 180,
        "wires": [
            [
                "d2e89fd1.06891",
                "e6ce01e2.b71ca"
            ]
        ]
    },
    {
        "id": "abfde8b5.c97ab8",
        "type": "file",
        "z": "6e7a064f.40b368",
        "name": "Save JPG",
        "filename": "",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 640,
        "y": 240,
        "wires": [
            [
                "4ea0a155.4acad"
            ]
        ]
    },
    {
        "id": "cc539556.4c2eb8",
        "type": "inject",
        "z": "6e7a064f.40b368",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 400,
        "wires": [
            [
                "93aceebe.d33a7"
            ]
        ]
    },
    {
        "id": "c6abf74.bc42008",
        "type": "debug",
        "z": "6e7a064f.40b368",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 530,
        "y": 400,
        "wires": []
    },
    {
        "id": "93aceebe.d33a7",
        "type": "template",
        "z": "6e7a064f.40b368",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "This is the payload: {{global.shinobiHost}} !",
        "output": "str",
        "x": 320,
        "y": 400,
        "wires": [
            [
                "c6abf74.bc42008"
            ]
        ]
    },
    {
        "id": "e6ce01e2.b71ca",
        "type": "change",
        "z": "6e7a064f.40b368",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "filename",
                "pt": "msg",
                "to": "action_details.filename",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 240,
        "wires": [
            [
                "abfde8b5.c97ab8"
            ]
        ]
    },
    {
        "id": "336d7d4d.ec0b42",
        "type": "api-current-state",
        "z": "6e7a064f.40b368",
        "name": "Home occupied",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.home_occupied",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 460,
        "y": 180,
        "wires": [
            [],
            [
                "4629c415.9b478c"
            ]
        ]
    },
    {
        "id": "3bfe5224.ebea1e",
        "type": "api-call-service",
        "z": "e3459f93.04f31",
        "name": "Volume Up",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "media_player",
        "service": "volume_up",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "Ettienne"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 210,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "5de612e6.72ed1c",
        "type": "api-call-service",
        "z": "e3459f93.04f31",
        "name": "Volume Down",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "media_player",
        "service": "volume_down",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 220,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "20c55a8e.998d46",
        "type": "api-call-service",
        "z": "e3459f93.04f31",
        "name": "Skip Forward",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "media_player",
        "service": "media_next_track",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.kitchen_speaker"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 210,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "f580e111.51aee",
        "type": "api-call-service",
        "z": "e3459f93.04f31",
        "name": "Skip Backward",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "media_player",
        "service": "media_previous_track",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.kitchen_speaker"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 220,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "7086b34c.163ddc",
        "type": "api-call-service",
        "z": "e3459f93.04f31",
        "name": "Play/Pause",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "media_player",
        "service": "media_play_pause",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.kitchen_speaker"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 210,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "ff87ee6a.cbec1",
        "type": "api-call-service",
        "z": "e3459f93.04f31",
        "name": "Onkyo Volume Up",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "media_player",
        "service": "volume_up",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.onkyo_amplifier"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 230,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "daf82d3e.5bcf9",
        "type": "api-call-service",
        "z": "e3459f93.04f31",
        "name": "Onkyo Volume Up",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "media_player",
        "service": "volume_down",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.onkyo_amplifier"
        ],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 230,
        "y": 525,
        "wires": [
            []
        ]
    },
    {
        "id": "5f013af5.9ed514",
        "type": "template",
        "z": "e3459f93.04f31",
        "name": "TV Power On Discrete",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgVmAHE4Dg4OKg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OKg4ODg4ODg4ODg4ODg4ODg4ODg4qDg4ODg4ODg4ODg4ODg4ODg4ODioOKg4qDioOKg4ODg4ODg4qDioOKg4qDioODg4qDgAJlQ0F",
        "output": "str",
        "x": 240,
        "y": 669,
        "wires": [
            []
        ]
    },
    {
        "id": "e8cbf2da.7c84",
        "type": "template",
        "z": "e3459f93.04f31",
        "name": "TV Power Off Discrete",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgVmAHE4Dg4OKg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4OKg4ODg4ODg4ODg4ODg4ODg4ODg4qDg4ODg4ODg4ODg4ODg4ODg4qDioOKg4qDioOKg4ODg4OKg4qDioOKg4qDioODg4qDgAJlQ0F",
        "output": "str",
        "x": 240,
        "y": 589,
        "wires": [
            []
        ]
    },
    {
        "id": "37a79d01.a27642",
        "type": "template",
        "z": "e3459f93.04f31",
        "name": "AMP Power On Discrete",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "JgBQAAABJ5MSEhI2EhISEhI2EhISNhI2EjYSEhI2EjYSEhI2EjYSEhISEhISNhISEhISEhISEhISNhI2EhISNhI2EjYSNhI2EgAFAQABJ0kSAAxTDQUAAAAAAAA=",
        "output": "str",
        "x": 250,
        "y": 629,
        "wires": [
            []
        ]
    },
    {
        "id": "9064c29e.81213",
        "type": "template",
        "z": "e3459f93.04f31",
        "name": "Plug #2 on",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "sgCWAQkXCRcaBwkYGQcKFwkXGQgZBwoXChcZBxkIGQcaBxkHChcJFwoXGQcKFxkIGAgZCBkHCRgJFxkICRcKFwkYCQABCQkXChcJFxoHCRcaBwkYCRcZCBkHChcJFxoHGQgYCBkIGAgJGAkXChcZCAkXGQcaBxkIGQcKFwkXGgcJGAkXCRcKAAEJCRcJGAkXGQgJFxoHCRgJFxkIGQcKFwkXGgcZBxoHGQgZBwkYCRcKFxkHChcZCBgIGQcaBwkYCRcZCAkXChcJFwkAAQoJFwkYCRcZCAkXGQgJGAkXGQgYCAkYCRcaBxkIGAgZBxoHChcJFwoXGQcKFxkHGQgZCBgICRcKFxkICRcJGAkXCgABCAoXCRcKFxkICRcZCAkXChcZCBkHCRgJFxkHGgcZCBkHGQgJFwoXCRgYCAkYGAgZBxoHGQgJFwkYGQgJFwkYCRcJAAEJChcJGAkXGgcJFxkICRgIGBkHGgcKFwkXGQgZCBgIGQcaBwkYCRcJFxoHChcZBxkIGQcaBwkYCRcZBwoXChcJFwkABdwAAA==",
        "output": "str",
        "x": 213,
        "y": 709,
        "wires": [
            []
        ]
    },
    {
        "id": "ce278ed3.fadd8",
        "type": "template",
        "z": "e3459f93.04f31",
        "name": "Plug #2 off",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "plain",
        "template": "sgCWAQoXCRcaBwkYGAgJFwoXGQgZBwoXCRcZCBkHGgcZCBkHCRgJFwkXChgJFxkHGQgZCBgICRgJFwoXGQcJGAkXCQABCQoXChYKFxkICRcZCAkXChcZCBkHCRgJFxkIGQcZCBkHGgcJGAkXChYKFwoWGgcZCBkHGQgJFwoXCRcZCAkXChcJAAEJChcJFwkYGQcKFxkHChcJGBgIGQgJFwkYGQcaBxkIGAgZCAkXCRgJFwkYCRcZCBkHGQgZCAkXCRcKFxkICRcJFwkAAQoJFwoXCRcaBwoXGQcKFwkXGQgZBwoXCRgZBxkIGAgZBxoHChcJFwoXCRgJFxkHGgcZCBkHCRgJFwkYGQcKFwkXCQABCgkXChcJFxkICRcaBwkYCRcZBxoHChcJFxkIGQcaBxkIGAgJGAkXCRcKFwkYGQcaBxkHGQgJFwoXCRgYCAkXChcJAAEJChcJGAkXGgcJFxkICRcKFxkIGQcJFwoXGQgZBxkIGQcZCAkXChcJGAkXCRcaBxkIGQcZCAkXChcJFxkICRgJFwkABdwAAA==",
        "output": "str",
        "x": 213,
        "y": 749,
        "wires": [
            []
        ]
    },
    {
        "id": "db7b450a.94d158",
        "type": "api-call-service",
        "z": "e3459f93.04f31",
        "name": "TTS Announce",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "tts",
        "service": "google_translate_say",
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.kitchen_speaker"
        ],
        "data": "{\"message\":\"{{randomPlaylist.desc}}\"}",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "",
        "output_location_type": "none",
        "x": 220,
        "y": 796,
        "wires": [
            []
        ]
    },
    {
        "id": "ab19dd7c.df1e9",
        "type": "mqtt in",
        "z": "e3459f93.04f31",
        "name": "",
        "topic": "rtl_433/+/events",
        "qos": "2",
        "datatype": "auto",
        "broker": "32add66e.5cfcaa",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 220,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "59767a2b.468824",
        "type": "api-current-state",
        "z": "e3459f93.04f31",
        "name": "Kitchen LED Strip On",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.wled",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 240,
        "y": 840,
        "wires": [
            [
                "3356022e.3cf77e"
            ],
            []
        ]
    },
    {
        "id": "3356022e.3cf77e",
        "type": "wled2",
        "z": "e3459f93.04f31",
        "address": "192.168.20.80",
        "brightness": "255",
        "delay": "20",
        "color1": "#ffffff",
        "color2": "#ffffff",
        "color3": "#ffffff",
        "effect": "0",
        "effectIntensity": 128,
        "effectSpeed": 128,
        "name": "LED Strip Off",
        "palette": "2",
        "preset": 0,
        "state": "off",
        "x": 430,
        "y": 840,
        "wires": [
            [
                "946dae34.cee7a"
            ]
        ]
    },
    {
        "id": "946dae34.cee7a",
        "type": "function",
        "z": "e3459f93.04f31",
        "name": "Random Effect",
        "func": "let randomNumber = Math.floor(Math.random() * 111);\nmsg.payload = {\n    \"effect\": randomNumber\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 840,
        "wires": [
            [
                "f453f1a7.31a0c"
            ]
        ]
    },
    {
        "id": "f453f1a7.31a0c",
        "type": "wled2",
        "z": "e3459f93.04f31",
        "address": "192.168.20.80",
        "brightness": "255",
        "delay": "20",
        "color1": "#ffffff",
        "color2": "#ffffff",
        "color3": "#ffffff",
        "effect": "44",
        "effectIntensity": 128,
        "effectSpeed": 128,
        "name": "LED Strip On",
        "palette": "2",
        "preset": 0,
        "state": "on",
        "x": 850,
        "y": 840,
        "wires": [
            []
        ]
    },
    {
        "id": "da273ee9a758ed7f",
        "type": "comment",
        "z": "e3459f93.04f31",
        "name": "Revisit Later",
        "info": "Todo only add effects that do not involve colour",
        "x": 850,
        "y": 800,
        "wires": []
    },
    {
        "id": "1c49b62d3e95d26d",
        "type": "server-state-changed",
        "z": "59f065f5cc116569",
        "name": "Upstairs Temp Change",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is_not",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 200,
        "y": 260,
        "wires": [
            [
                "aa230da2253dc016"
            ]
        ]
    },
    {
        "id": "90f751dd6f8e9b70",
        "type": "server-state-changed",
        "z": "59f065f5cc116569",
        "name": "Downstairs Temp Change",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "sensor.multisensor_dining_temp_filtered",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is_not",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 210,
        "y": 320,
        "wires": [
            [
                "aa230da2253dc016"
            ]
        ]
    },
    {
        "id": "050e8d85446ae780",
        "type": "api-current-state",
        "z": "59f065f5cc116569",
        "name": "HVAC Downstairs On",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.hvac_downstairs",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "ds_switch_payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "ds_switch_data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 660,
        "y": 320,
        "wires": [
            [
                "b4a6cedcf26a4b72"
            ]
        ]
    },
    {
        "id": "b4a6cedcf26a4b72",
        "type": "api-current-state",
        "z": "59f065f5cc116569",
        "name": "HVAC Upstairs On",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.hvac_upstairs",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "us_switch_payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "us_switch_data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 890,
        "y": 320,
        "wires": [
            [
                "369ca51b8f5b36e7"
            ]
        ]
    },
    {
        "id": "369ca51b8f5b36e7",
        "type": "api-current-state",
        "z": "59f065f5cc116569",
        "name": "HVAC Downstairs Temp",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_number.downstairs_temp",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "ds_targettemp_payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "ds_targettemp_data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1130,
        "y": 320,
        "wires": [
            [
                "0c47d3286df7dae3"
            ]
        ]
    },
    {
        "id": "0c47d3286df7dae3",
        "type": "api-current-state",
        "z": "59f065f5cc116569",
        "name": "HVAC Upstairs Temp",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_number.upstairs_temp",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "us_targettemp_payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "us_targettemp_data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 660,
        "y": 400,
        "wires": [
            [
                "ebd02f48c9852c26"
            ]
        ]
    },
    {
        "id": "84b39f6fadc04a48",
        "type": "switch",
        "z": "59f065f5cc116569",
        "name": "",
        "property": "serviceData",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 460,
        "wires": [
            [
                "0fba0ceb99d6fbbf"
            ]
        ]
    },
    {
        "id": "db34cfe012c16dd7",
        "type": "api-current-state",
        "z": "59f065f5cc116569",
        "name": "Upstairs Temp",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.multisensor_kitchen_temp_filtered",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "us_temp_payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "us_temp_data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1060,
        "y": 260,
        "wires": [
            [
                "050e8d85446ae780"
            ]
        ]
    },
    {
        "id": "24cdcf9c50a1a341",
        "type": "api-current-state",
        "z": "59f065f5cc116569",
        "name": "Downstairs Temp",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.multisensor_dining_temp_filtered",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "ds_temp_payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "ds_temp_data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 830,
        "y": 260,
        "wires": [
            [
                "db34cfe012c16dd7"
            ]
        ]
    },
    {
        "id": "ebd02f48c9852c26",
        "type": "function",
        "z": "59f065f5cc116569",
        "name": "",
        "func": "let usHeatingOn = false;\nlet dsHeatingOn = false;\nlet usCoolingOn = false;\nlet dsCoolingOn = false;\nlet cooling = false;\nlet heating = false;\nlet serviceData = {}\nlet debugThis = false;\nlet isOn = false;\nmsg.callService = false;\nlet mode = msg.hvac_mode_payload;\n\n\nfunction HeatOperation() {\n    if (msg.ds_switch_payload === \"on\" && parseFloat(msg.ds_targettemp_payload) > parseFloat(msg.ds_temp_payload)) {\n        dsHeatingOn = true;\n    } else if (msg.ds_switch_payload === \"on\" && parseFloat(msg.ds_targettemp_payload) <= parseFloat(msg.ds_temp_payload)) {\n        dsHeatingOn = false;\n    }\n\n    if (msg.us_switch_payload === \"on\" && parseFloat(msg.us_targettemp_payload) > parseFloat(msg.us_temp_payload)) {\n        usHeatingOn = true;\n    } else if (msg.us_switch_payload === \"on\" && parseFloat(msg.us_targettemp_payload) <= parseFloat(msg.us_temp_payload)) {\n        usHeatingOn = false;\n    }\n\n    if (IsOn()) {\n        serviceData = {\n            data: {\n                raw_command: {\n                    \"system\":\"on\",\n                    \"type\":\"heat\", \n                    \"mode\":\"thermo\"\n                }\n            }\n        };\n\n        if (dsHeatingOn && usHeatingOn) {\n            serviceData.data.raw_command.zoneList = \"1,2\";\n            serviceData.data.raw_command.setPoint = Math.trunc(msg.ds_targettemp_payload > msg.us_targettemp_payload ? msg.ds_targettemp_payload : msg.us_targettemp_payload);\n        } else if (dsHeatingOn && !usHeatingOn) {\n            serviceData.data.raw_command.zoneList = \"2\";\n            serviceData.data.raw_command.setPoint = Math.trunc(msg.ds_targettemp_payload);\n        } else if (!dsHeatingOn && usHeatingOn) {\n            serviceData.data.raw_command.zoneList = \"1\";\n            serviceData.data.raw_command.setPoint = Math.trunc(msg.us_targettemp_payload);\n        } else if (!dsHeatingOn && !usHeatingOn) {\n            serviceData.data.raw_command.system = \"off\";\n            serviceData.data.raw_command.zoneList = \"1,2\";\n        }\n        msg.serviceData = serviceData;\n        msg.payload = serviceData;\n    }\n    if (debugThis)\n        node.warn(msg.serviceData.data.raw_command)\n\n}\n\nfunction CoolOperation() {\n    if (msg.ds_switch_payload === \"on\" && parseFloat(msg.ds_targettemp_payload) < parseFloat(msg.ds_temp_payload)) {\n        dsCoolingOn = true;\n    } else if (msg.ds_switch_payload === \"on\" && parseFloat(msg.ds_targettemp_payload) >= parseFloat(msg.ds_temp_payload)) {\n        dsCoolingOn = false;\n    }\n\n    if (msg.us_switch_payload === \"on\" && parseFloat(msg.us_targettemp_payload) < parseFloat(msg.us_temp_payload)) {\n        usCoolingOn = true;\n    } else if (msg.us_switch_payload === \"on\" && parseFloat(msg.us_targettemp_payload) <= parseFloat(msg.us_temp_payload)) {\n        usCoolingOn = false;\n    }\n\n    if (IsOn()) {\n        serviceData = {\n            data: {\n                raw_command: {\n                    \"system\": \"on\",\n                    \"type\": \"cool\",\n                    \"mode\": \"thermo\"\n                }\n            }\n        };\n\n        if (dsCoolingOn && usCoolingOn) {\n            serviceData.data.raw_command.zoneList = \"1,2\";\n            serviceData.data.raw_command.setPoint = Math.trunc(msg.ds_targettemp_payload > msg.us_targettemp_payload ? msg.ds_targettemp_payload : msg.us_targettemp_payload);\n        } else if (dsCoolingOn && !usCoolingOn) {\n            serviceData.data.raw_command.zoneList = \"2\";\n            serviceData.data.raw_command.setPoint = Math.trunc(msg.ds_targettemp_payload);\n        } else if (!dsCoolingOn && usCoolingOn) {\n            serviceData.data.raw_command.zoneList = \"1\";\n            serviceData.data.raw_command.setPoint = Math.trunc(msg.us_targettemp_payload);\n        } else if (!dsCoolingOn && !usCoolingOn) {\n            serviceData.data.raw_command.system = \"off\";\n            serviceData.data.raw_command.zoneList = \"1,2\";\n        }\n        msg.serviceData = serviceData;\n        msg.payload = serviceData;\n    }\n    if (debugThis)\n        node.warn(msg.serviceData.data.raw_command)\n\n}\n\n\nfunction IsOn() {\n    return (msg.ds_switch_payload === \"on\" || msg.us_switch_payload === \"on\");\n}\n\nfunction TurnOff() {\n    serviceData = {\n        data: {\n            raw_command: {\n                \"system\": \"on\",\n                \"type\": \"heat\",\n                \"mode\": \"thermo\"\n            }\n        }\n    };\n    serviceData.data.raw_command.system = \"off\";\n    serviceData.data.raw_command.zoneList = \"1,2\";\n    msg.serviceData = serviceData;\n    msg.payload = serviceData;\n}\n\nif (IsOn()) {\n    if (mode === \"Heat\") {\n        HeatOperation();\n    }\n    else if (mode === \"Cool\") {\n        CoolOperation();\n    }\n} else {\n    TurnOff();\n}\n\nif(debugThis) {\n    node.warn(`HVAC Mode ${msg.hvac_mode_payload}`)\n    node.warn(`Downstairs On ${msg.ds_switch_payload === \"on\"}`)\n    node.warn(`Downstairs Target Temp ${parseFloat(msg.ds_targettemp_payload)}`)\n    node.warn(`Is DS target smaller than current ${parseFloat(msg.ds_targettemp_payload) < parseFloat(msg.ds_temp_payload)}`)\n}\n\n//service: bonaire_myclimate.send_raw_command\n//data:\n//  raw_command:\n//    system: 'on'\n//    zoneList: '1'\n//    setPoint: '22'\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 400,
        "wires": [
            [
                "84b39f6fadc04a48"
            ]
        ]
    },
    {
        "id": "b325f3d33598ac6b",
        "type": "inject",
        "z": "59f065f5cc116569",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 400,
        "y": 180,
        "wires": [
            [
                "aa230da2253dc016"
            ]
        ]
    },
    {
        "id": "d00a3c9ec8fdc47d",
        "type": "api-call-service",
        "z": "59f065f5cc116569",
        "name": "Call Bonair Service",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "domain": "bonaire_myclimate",
        "service": "send_raw_command",
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "data": "",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "output_location": "payload",
        "output_location_type": "none",
        "x": 690,
        "y": 520,
        "wires": [
            [
                "f459fbac9ae0674b"
            ]
        ]
    },
    {
        "id": "f459fbac9ae0674b",
        "type": "debug",
        "z": "59f065f5cc116569",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 520,
        "wires": []
    },
    {
        "id": "0fba0ceb99d6fbbf",
        "type": "rbe",
        "z": "59f065f5cc116569",
        "name": "Send on change",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "serviceData.data.raw_command",
        "topi": "topic",
        "x": 820,
        "y": 460,
        "wires": [
            [
                "315b9656fb216cf3",
                "d00a3c9ec8fdc47d"
            ]
        ]
    },
    {
        "id": "315b9656fb216cf3",
        "type": "debug",
        "z": "59f065f5cc116569",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 460,
        "wires": []
    },
    {
        "id": "aa230da2253dc016",
        "type": "api-current-state",
        "z": "59f065f5cc116569",
        "name": "HVAC Mode",
        "server": "5a39eab2.9f6814",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_select.hvac_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "hvac_mode_payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "hvac_mode_data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 630,
        "y": 260,
        "wires": [
            [
                "24cdcf9c50a1a341"
            ]
        ]
    },
    {
        "id": "637f040a0b351946",
        "type": "server-state-changed",
        "z": "59f065f5cc116569",
        "name": "DS Target Temp",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "input_number.downstairs_temp",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is_not",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 380,
        "wires": [
            [
                "aa230da2253dc016"
            ]
        ]
    },
    {
        "id": "5d4b960cbdf37041",
        "type": "server-state-changed",
        "z": "59f065f5cc116569",
        "name": "US Target Temp",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "input_number.upstairs_temp",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is_not",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 180,
        "y": 440,
        "wires": [
            [
                "aa230da2253dc016"
            ]
        ]
    },
    {
        "id": "f0e6d780120b9ccc",
        "type": "server-state-changed",
        "z": "59f065f5cc116569",
        "name": "US On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.hvac_upstairs",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is_not",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 210,
        "y": 500,
        "wires": [
            [
                "aa230da2253dc016"
            ]
        ]
    },
    {
        "id": "e635c6a65fc76a9b",
        "type": "server-state-changed",
        "z": "59f065f5cc116569",
        "name": "DS On",
        "server": "5a39eab2.9f6814",
        "version": 5,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entityId": "input_boolean.hvac_downstairs",
        "entityIdType": "exact",
        "outputInitially": false,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is_not",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 210,
        "y": 560,
        "wires": [
            [
                "aa230da2253dc016"
            ]
        ]
    }
]